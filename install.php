<?php
 goto pZQ_h; GEHBd: $ret["\x75\160\154\157\x61\x64"]["\156\x61\155\x65"] = "\xe4\xb8\x8a\xe4\xbc\xa0\351\231\220\xe5\x88\xb6"; goto ESvo8; gLqma: if (!(!empty($auth["\165\162\154"]) && $auth["\x75\x72\x6c"] == $siteroot)) { goto FNz2H; } goto ak7Fg; Sqeaw: $data = we7_request_api(API_GET_CHUNK_PACKAGE, $post); goto Z4DZp; fRL5K: exit(we7_error(400, $chunk_num)); goto GoVc0; tS3B6: $ret["\144\x6f\x6d"]["\x6e\141\155\145"] = "\x44\117\115\104\x6f\143\165\155\x65\156\164"; goto Y86Jl; GdYJI: if (!($database_result !== true)) { goto ZlnkB; } goto a01c6; WomHC: exit(we7_error(0, $chunk_num)); goto rpxEN; RwCon: RKjSy: goto Co31E; rM3g5: $code = trim($_GET["\143\x6f\144\145"]); goto trKfO; XlG7B: exit(we7_error(400, "\143\150\165\156\x6b\345\244\247\344\xba\216\xe6\x9c\200\xe5\244\247\345\200\xbc")); goto bwz2E; F37yw: if (!(empty($accesstoken) && $action != "\162\x65\147\x69\x73\x74\145\162\x5f\143\x61\x6c\x6c\x62\141\143\153")) { goto yJ7d9; } goto BcZIC; iwvol: $ret["\141\x6c\x77\141\171\163\137\x70\x6f\160\165\154\141\164\145\137\162\141\x77\137\160\157\163\x74\x5f\144\141\164\141"]["\162\x65\163\x75\154\164"] = @ini_get("\141\154\167\x61\x79\163\137\x70\157\x70\x75\x6c\x61\x74\x65\137\162\x61\x77\x5f\x70\157\163\164\x5f\x64\141\x74\141"); goto P_j1x; moMwz: header("\x4c\157\x63\x61\164\151\157\x6e\72\40" . $forward); goto HBTLt; XHgya: exit; goto zfEbw; E9V7N: $ret["\x64\141\x74\x61"]["\146\141\x69\154\x65\x64"] = true; goto u9Hfy; ifL34: $data = we7_request_api(API_OAUTH_LOGIN_URL, array("\162\x65\x64\151\x72\145\x63\x74" => $callback)); goto mmgnw; wWSR9: setting_save($site, "\163\151\x74\145"); goto n8RUi; gf7NV: if (!($username != "\141\x64\x6d\151\x6e" || $password != "\61\62\x33\x34\x35\x36")) { goto tJ4w6; } goto YiglY; woJEY: function local_run($sql, $link, $db) { goto Lblnw; fhOa6: foreach ($ret as $query) { goto Woay5; NJy9X: $errorInfo = $link->errorInfo(); goto tFytt; Woay5: $query = trim($query); goto O5xQQ; jd1fG: lrdSW: goto ytLmS; ytLmS: gvs5h: goto qJUww; MTTuM: $link->exec($query); goto ZNm1H; Er5GB: exit($query); goto jd1fG; tFytt: echo $errorInfo[0] . "\x3a\x20" . $errorInfo[2] . "\74\142\162\40\x2f\76"; goto Er5GB; O5xQQ: if (!$query) { goto gvs5h; } goto MTTuM; qJUww: n71Jv: goto B9AV5; ZNm1H: if (!($link->errorCode() != "\60\60\x30\60\x30")) { goto lrdSW; } goto NJy9X; B9AV5: } goto XlzSA; XlzSA: kLSJt: goto KIOqK; nLxwu: $ret = array(); goto mEwSQ; u1Hr2: unset($sql); goto fhOa6; S2Ox1: foreach (explode("\73\xa", trim($sql)) as $query) { goto ihv35; ed2Re: $queries = explode("\xa", trim($query)); goto s4mmm; ihv35: $ret[$num] = ''; goto ed2Re; s4mmm: foreach ($queries as $query) { $ret[$num] .= isset($query[0]) && $query[0] == "\x23" || isset($query[1]) && isset($query[1]) && $query[0] . $query[1] == "\55\55" ? '' : $query; sxQbg: } goto C6iTs; lrx38: vlZ3x: goto IUbDf; C6iTs: aQg8B: goto UXQ2_; UXQ2_: $num++; goto lrx38; IUbDf: } goto baDI8; Lax2o: $sql = str_replace("\15", "\12", str_replace("\x20\151\x6d\x73\x5f", "\40" . $db["\160\x72\x65\x66\x69\170"], $sql)); goto ZaOb1; Lblnw: if (!(!isset($sql) || empty($sql))) { goto UXY6X; } goto i7B0Y; mEwSQ: $num = 0; goto S2Ox1; e0mu8: UXY6X: goto Lax2o; ZaOb1: $sql = str_replace("\15", "\12", str_replace("\40\140\151\155\x73\137", "\x20\x60" . $db["\x70\x72\x65\x66\151\170"], $sql)); goto nLxwu; baDI8: WUXJE: goto u1Hr2; i7B0Y: return; goto e0mu8; KIOqK: } goto DqqtG; gNk7v: if (!($action == "\157\x61\x75\164\x68")) { goto lkfoQ; } goto rM3g5; Gh73O: $finished = true; goto xJu0A; pZQ_h: ini_set("\144\x69\x73\x70\154\141\171\x5f\x65\x72\x72\x6f\162\163", 0); goto j8l1y; H2R0Q: $database_result = we7_build_config($server, $db_username, $db_password, $db_name, $db_prefix); goto f0886; xMgwl: HZCX7: goto Y1NN8; xUSSx: $db_password = trim($_POST["\160\141\163\163\x77\x6f\162\x64"]); goto L3Bzz; SxN_O: goto KX21L; goto FMT5c; q0Um4: $server["\x75\x70\154\157\141\x64"] = strtolower($server["\x75\160\x6c\157\141\144"]); goto k9dcv; e5NBO: $url = $siteroot . "\57\x69\x6e\x73\164\141\154\154\56\160\150\x70\x3f\x73\164\145\160\x3d\157\141\165\164\x68"; goto gghFT; bayye: $ret["\144\x61\164\x61"]["\162\x65\163\165\x6c\164"] = "\144\x61\164\x61\xe7\233\xae\345\275\x95\xe6\227\240\xe6\xb3\225\345\x86\231\345\x85\245"; goto Zbl1S; p4opc: Cwap2: goto GER_g; HUO1l: we7_finish(); goto g0Cyi; aOtNC: we7_setcookie("\141\143\143\145\163\163\164\157\153\145\x6e", $data); goto QewBX; U7FWX: if (!(!empty($ret["\141\163\x70\x5f\164\141\x67\163"]["\x6f\x6b"]) && strtolower($ret["\141\x73\160\137\164\x61\147\x73"]["\x6f\153"]) == "\157\x6e")) { goto vlvcq; } goto f_lnv; wZmTT: exit(we7_error(400, $data["\x65\162\162\x6f\x72"])); goto BKvtE; hZU_q: if ($user_result) { goto xzTax; } goto HU1nk; vQ4aq: we7_setcookie("\x70\x61\143\153\x61\x67\x65\137\155\x64\x35", $data["\x6d\x64\x35"]); goto DmKGz; MS1UA: function we7_finish() { goto CXa_U; rH3dv: we7_setcookie("\160\141\143\153\x61\x67\x65\137\x6d\x64\x35", '', -10); goto ZJVnt; jwDb4: load()->web("\143\x6f\x6d\x6d\x6f\156"); goto Hbj3m; UhPLl: load()->model("\x73\x65\x74\x74\151\156\x67"); goto HinPL; fxqG8: cache_build_users_struct(); goto UXY4R; HinPL: load()->model("\x63\141\143\x68\145"); goto pbgvm; ZJVnt: we7_setcookie("\143\150\x75\x6e\x6b\x5f\x74\157\164\x61\154", '', -10); goto Geb7e; Tn9cF: $_W["\165\151\x64"] = $_W["\151\163\x66\x6f\x75\156\x64\145\162"] = 1; goto jwDb4; Pv6zG: return true; goto xuHIE; Geb7e: @unlink(IA_INSTALL_ROOT . "\57\x64\x61\164\141\x2f\144\142\56\x70\x68\x70"); goto YjHTc; kY1jn: require IA_INSTALL_ROOT . "\57\x77\145\142\57\x63\x6f\155\x6d\157\156\x2f\x62\x6f\157\164\163\x74\x72\x61\160\x2e\163\x79\163\56\151\156\143\x2e\160\150\160"; goto Tn9cF; AwqnC: cache_build_setting(); goto fxqG8; pbgvm: cache_build_frame_menu(); goto AwqnC; CXa_U: global $_W; goto rH3dv; YjHTc: @unlink(IA_INSTALL_ROOT . "\x2f\144\141\164\141\x2f\144\142\x2e\x6c\x6f\x63\x6b"); goto NFhty; NFhty: define("\x49\x4e\137\123\x59\123", true); goto MyBOW; MyBOW: require IA_INSTALL_ROOT . "\x2f\146\162\141\x6d\x65\167\157\162\x6b\57\142\157\x6f\x74\x73\x74\x72\141\160\56\x69\156\x63\56\x70\150\160"; goto kY1jn; UXY4R: cache_build_module_subscribe_type(); goto Pv6zG; Hbj3m: load()->web("\x74\145\155\x70\x6c\x61\x74\x65"); goto UhPLl; xuHIE: } goto PK36L; VmikF: function install_authcode($string, $operation = "\x44\105\x43\117\104\x45", $key = '', $expiry = 0) { goto IJF3d; hfTTp: $i++; goto OwN8J; adXVO: if (!($i <= 255)) { goto Vtrig; } goto yHwg5; nQuix: $keyb = md5(substr($key, 16, 16)); goto CEbTL; Yc7s8: goto Q9vyQ; goto zjANB; HQ5Vt: ughdc: goto ZS_gG; zZkmu: return $keyc . str_replace("\75", '', base64_encode($result)); goto KiAdT; BT1HO: $key = md5($key != '' ? $key : $GLOBALS["\137\x57"]["\143\x6f\x6e\146\x69\147"]["\x73\145\164\164\151\156\147"]["\x61\165\x74\150\153\145\171"]); goto awp3F; qJImb: $tmp = $box[$i]; goto KueWA; ZS_gG: if (!($i < $string_length)) { goto OFazU; } goto iLc2c; BZm0i: $box = range(0, 255); goto ngOyF; z6mdk: yIEg4: goto ny6YD; JaVoS: if ($operation == "\x44\105\103\117\x44\x45") { goto IJD2R; } goto zZkmu; LFlBv: $i++; goto dWdWu; yHwg5: $rndkey[$i] = ord($cryptkey[$i % $key_length]); goto wLVxG; cTIRG: $i++; goto WD8NL; sFqLs: Q9vyQ: goto VBYLU; XAdDH: $j = $i = 0; goto z6mdk; x0xZY: PmIlG: goto cTIRG; vKSaL: $box[$a] = $box[$j]; goto cECJk; iLc2c: $a = ($a + 1) % 256; goto jWuXz; iS7jg: Vtrig: goto XAdDH; KiAdT: goto gATKv; goto BiNSi; WD8NL: goto ughdc; goto atCGd; rbBDV: $string_length = strlen($string); goto GS3ge; KueWA: $box[$i] = $box[$j]; goto Aj7Eh; IJF3d: $ckey_length = 4; goto BT1HO; i83mG: $key_length = strlen($cryptkey); goto ezqsc; cECJk: $box[$j] = $tmp; goto ChzJX; OwN8J: goto yIEg4; goto LzRuJ; LzRuJ: wPktb: goto q3Hg2; jWuXz: $j = ($j + $box[$a]) % 256; goto nF4sx; bUAhY: $cryptkey = $keya . md5($keya . $keyc); goto i83mG; zjANB: gFUxU: goto yx24L; nF4sx: $tmp = $box[$a]; goto vKSaL; yx24L: return substr($result, 26); goto sFqLs; ezqsc: $string = $operation == "\104\105\x43\117\104\105" ? base64_decode(substr($string, $ckey_length)) : sprintf("\x25\x30\x31\x30\144", $expiry ? $expiry + time() : 0) . substr(md5($string . $keyb), 0, 16) . $string; goto rbBDV; IscWI: $j = ($j + $box[$i] + $rndkey[$i]) % 256; goto qJImb; ny6YD: if (!($i < 256)) { goto wPktb; } goto IscWI; ngOyF: $rndkey = array(); goto aLVxt; dWdWu: goto O02KI; goto iS7jg; BiNSi: IJD2R: goto gdypp; VBYLU: gATKv: goto xz2Yp; wLVxG: TQzJs: goto LFlBv; atCGd: OFazU: goto JaVoS; tgn75: Hnkpl: goto hfTTp; ihQMu: return ''; goto Yc7s8; awp3F: $keya = md5(substr($key, 0, 16)); goto nQuix; mGQkF: O02KI: goto adXVO; aLVxt: $i = 0; goto mGQkF; Aj7Eh: $box[$j] = $tmp; goto tgn75; ChzJX: $result .= chr(ord($string[$i]) ^ $box[($box[$a] + $box[$j]) % 256]); goto x0xZY; gdypp: if ((substr($result, 0, 10) == 0 || substr($result, 0, 10) - time() > 0) && substr($result, 10, 16) == substr(md5(substr($result, 26) . $keyb), 0, 16)) { goto gFUxU; } goto ihQMu; CEbTL: $keyc = $ckey_length ? $operation == "\x44\105\x43\117\x44\105" ? substr($string, 0, $ckey_length) : substr(md5(microtime()), -$ckey_length) : ''; goto bUAhY; GS3ge: $result = ''; goto BZm0i; q3Hg2: $a = $j = $i = 0; goto HQ5Vt; xz2Yp: } goto DsrdL; svIbX: touch(IA_INSTALL_ROOT . "\57\x64\x61\164\x61\x2f\151\x6e\163\x74\141\154\x6c\x2e\x6c\x6f\143\153"); goto OIDVs; T6a6y: qHj06: goto e5NBO; T5wpH: function we7_error($num, $message = "\163\165\x63\143\x65\x73\163") { goto w4p1c; RFMfu: if (is_array($message)) { goto NpVpA; } goto T4hHD; oDycV: UP7ML: goto Lf_NM; hMaCo: p49gk: goto oDycV; Ho11n: return json_encode($message); goto hMaCo; T4hHD: return json_encode(array("\144\x61\x74\x61" => $message)); goto TJWpO; XLYVJ: NpVpA: goto Ho11n; xManp: return json_encode(array("\x65\x72\x72\x6f\x72" => $message)); goto PlkRf; TF7_a: Uyx8Y: goto RFMfu; w4p1c: $num = intval($num); goto QC_43; QC_43: if ($num == 0) { goto Uyx8Y; } goto sMkqo; sMkqo: http_response_code($num); goto xManp; PlkRf: goto UP7ML; goto TF7_a; TJWpO: goto p49gk; goto XLYVJ; Lf_NM: } goto FRQ1M; NuQ68: $ret["\x61\163\x70\137\x74\x61\x67\x73"]["\162\x65\x73\165\154\x74"] = "\141\163\160\137\x74\141\147\163\xe5\274\x80\345\x90\xaf\347\212\xb6\xe6\x80\x81"; goto dY_x9; DNEDZ: function local_config() { $cfg = "\74\x3f\160\x68\x70\xd\12\x64\145\x66\151\x6e\145\144\50\x27\111\x4e\137\111\x41\x27\x29\x20\157\162\x20\145\170\x69\x74\x28\x27\101\143\x63\145\163\x73\40\104\145\156\x69\145\144\x27\51\x3b\15\xa\15\12\44\x63\x6f\x6e\146\x69\x67\40\x3d\x20\x61\x72\x72\141\171\x28\x29\x3b\xd\xa\xd\xa\44\x63\157\156\146\x69\147\x5b\x27\x64\142\x27\135\x5b\47\155\141\163\164\145\x72\x27\135\x5b\47\x68\x6f\x73\164\47\135\40\x3d\40\47\x7b\144\x62\55\x73\145\x72\x76\145\x72\x7d\x27\73\xd\xa\44\143\x6f\x6e\x66\151\x67\133\47\x64\x62\x27\x5d\133\x27\155\x61\x73\164\x65\x72\47\x5d\x5b\x27\x75\163\x65\162\x6e\x61\155\x65\47\x5d\40\75\40\47\173\144\x62\x2d\x75\163\145\x72\x6e\x61\155\145\175\47\73\xd\xa\x24\x63\157\x6e\x66\x69\147\x5b\47\x64\142\47\x5d\133\47\x6d\141\x73\164\145\x72\x27\135\133\47\160\141\x73\163\167\x6f\162\x64\47\x5d\x20\x3d\40\47\x7b\144\142\x2d\x70\141\x73\x73\x77\x6f\162\x64\175\x27\x3b\15\12\44\143\x6f\156\146\x69\x67\x5b\47\144\x62\x27\x5d\x5b\47\155\141\163\x74\x65\162\x27\135\133\47\160\x6f\x72\164\47\x5d\x20\75\40\x27\x7b\144\142\55\160\x6f\162\164\175\47\73\15\xa\x24\143\x6f\x6e\x66\151\147\x5b\47\144\x62\47\x5d\x5b\47\x6d\141\x73\x74\145\162\x27\x5d\133\47\144\141\x74\x61\142\141\163\x65\x27\x5d\x20\75\40\47\x7b\x64\x62\55\x6e\x61\x6d\145\175\x27\x3b\15\12\44\x63\x6f\156\146\151\x67\x5b\47\144\142\47\x5d\x5b\47\155\x61\163\164\145\x72\x27\x5d\x5b\x27\x63\x68\x61\x72\163\x65\x74\47\135\40\x3d\x20\x27\x75\x74\146\70\x27\73\xd\12\x24\143\157\156\146\151\x67\x5b\47\x64\x62\47\x5d\133\47\x6d\141\163\x74\x65\x72\47\x5d\133\47\160\x63\x6f\x6e\156\145\143\164\x27\x5d\x20\75\x20\60\x3b\15\12\44\x63\157\x6e\146\x69\147\x5b\x27\144\142\47\135\133\47\x6d\x61\163\x74\145\162\x27\x5d\133\x27\x74\141\142\x6c\x65\160\162\x65\47\x5d\40\x3d\40\x27\173\144\x62\x2d\x74\141\x62\x6c\x65\x70\x72\x65\175\47\73\15\12\xd\12\x24\143\x6f\x6e\x66\151\147\133\x27\x64\142\x27\x5d\133\47\x73\x6c\141\x76\145\137\x73\164\x61\x74\x75\163\47\x5d\40\75\40\146\x61\154\x73\145\x3b\15\12\44\143\157\156\146\x69\147\133\x27\144\x62\x27\x5d\x5b\47\x73\154\x61\x76\x65\x27\x5d\133\x27\x31\47\135\133\47\150\157\163\164\x27\x5d\x20\75\x20\x27\47\73\15\xa\x24\143\157\156\x66\x69\x67\x5b\47\144\x62\47\135\x5b\x27\x73\x6c\x61\166\x65\47\x5d\133\47\x31\x27\x5d\133\47\165\x73\x65\162\x6e\141\155\x65\x27\x5d\x20\75\40\x27\47\73\xd\xa\x24\x63\157\x6e\x66\x69\147\x5b\x27\144\142\47\135\x5b\47\x73\154\x61\166\145\x27\135\x5b\47\x31\47\135\x5b\47\x70\x61\163\x73\x77\x6f\162\144\x27\x5d\40\x3d\40\x27\47\73\15\12\x24\143\x6f\156\146\151\147\133\x27\144\142\x27\x5d\133\47\163\x6c\141\166\145\x27\135\133\x27\x31\47\135\x5b\x27\x70\157\x72\x74\x27\x5d\x20\x3d\x20\x27\63\x33\x30\x37\47\73\xd\xa\x24\x63\157\156\x66\x69\147\133\x27\144\142\x27\135\133\x27\163\x6c\141\x76\x65\47\x5d\x5b\47\x31\x27\x5d\133\x27\144\x61\164\x61\142\141\x73\x65\x27\135\x20\x3d\40\47\47\73\15\xa\x24\x63\157\156\146\151\147\133\x27\144\142\x27\x5d\x5b\47\163\x6c\141\x76\x65\47\135\x5b\x27\x31\47\x5d\133\47\x63\150\141\162\163\145\x74\47\x5d\x20\75\40\47\x75\x74\146\x38\47\x3b\xd\xa\44\x63\157\x6e\146\x69\147\133\47\144\142\x27\x5d\133\47\x73\154\x61\x76\145\47\x5d\x5b\47\61\47\135\x5b\x27\x70\x63\157\x6e\156\x65\143\x74\47\x5d\x20\75\x20\60\x3b\xd\12\x24\143\157\156\x66\x69\x67\x5b\x27\x64\142\47\135\133\x27\163\154\141\166\145\x27\135\x5b\x27\61\x27\135\x5b\47\164\x61\142\154\x65\x70\x72\x65\47\135\x20\75\40\47\x69\155\x73\137\x27\73\xd\xa\44\x63\x6f\x6e\x66\x69\147\x5b\47\x64\x62\47\x5d\x5b\47\x73\x6c\x61\166\145\47\135\133\x27\61\47\x5d\x5b\x27\167\145\151\x67\x68\x74\x27\135\40\x3d\40\60\73\15\xa\15\12\44\143\157\x6e\x66\x69\x67\x5b\47\x64\142\x27\x5d\x5b\47\143\157\155\x6d\157\x6e\x27\x5d\x5b\x27\x73\x6c\141\x76\145\137\145\170\143\x65\x70\x74\x5f\x74\141\142\x6c\145\47\135\40\75\40\x61\x72\162\x61\x79\x28\x27\x63\157\x72\x65\137\x73\145\163\x73\151\x6f\156\x73\47\x29\x3b\15\xa\xd\xa\57\57\x20\x2d\55\55\x2d\55\x2d\x2d\55\x2d\x2d\55\x2d\x2d\x2d\55\x2d\55\55\55\55\x2d\x2d\x2d\x2d\55\55\40\x20\x43\x4f\x4e\106\x49\107\x20\103\x4f\x4f\113\x49\x45\40\40\55\x2d\55\x2d\55\55\x2d\55\x2d\x2d\x2d\x2d\55\x2d\x2d\x2d\x2d\55\55\x2d\x2d\55\x2d\55\55\x2d\x2d\40\57\x2f\xd\xa\44\x63\157\156\146\x69\x67\133\x27\143\157\157\x6b\151\x65\x27\x5d\x5b\x27\x70\x72\145\x27\135\x20\75\40\x27\x7b\x63\x6f\157\x6b\151\x65\160\x72\145\175\47\x3b\15\xa\x24\143\157\x6e\x66\151\x67\133\47\143\157\x6f\153\151\145\47\x5d\133\47\144\x6f\155\141\x69\156\47\x5d\x20\x3d\40\47\47\73\15\xa\44\x63\x6f\x6e\x66\x69\x67\133\x27\x63\x6f\157\153\151\x65\47\x5d\133\x27\x70\141\x74\x68\x27\135\x20\75\40\x27\x2f\47\x3b\15\12\15\12\57\57\x20\55\55\x2d\55\55\x2d\55\x2d\55\x2d\55\55\x2d\55\x2d\x2d\55\55\55\55\x2d\x2d\55\55\55\x2d\40\x20\x43\x4f\x4e\106\111\107\40\x53\x45\x54\124\x49\x4e\x47\40\x20\x2d\55\x2d\55\x2d\55\x2d\55\55\x2d\55\55\x2d\x2d\x2d\x2d\55\x2d\x2d\x2d\55\x2d\x2d\x2d\55\55\55\40\x2f\x2f\15\xa\44\143\x6f\x6e\x66\151\147\133\47\163\145\x74\x74\151\156\147\47\135\133\47\143\150\141\162\163\x65\164\47\135\x20\x3d\x20\47\x75\x74\146\x2d\70\47\73\xd\xa\x24\143\157\x6e\x66\x69\147\133\x27\163\x65\164\164\151\156\147\47\135\133\47\143\x61\143\x68\145\47\135\x20\x3d\40\x27\155\x79\x73\161\x6c\x27\x3b\15\xa\x24\x63\x6f\156\146\151\147\x5b\47\x73\x65\x74\x74\151\x6e\x67\47\135\133\x27\164\x69\x6d\145\x7a\157\156\x65\x27\x5d\x20\75\x20\x27\101\163\151\x61\57\x53\150\x61\156\x67\x68\x61\151\x27\73\15\12\x24\x63\157\x6e\x66\x69\x67\x5b\x27\163\145\x74\164\151\x6e\x67\47\135\x5b\x27\x6d\145\x6d\157\x72\171\x5f\154\x69\x6d\151\164\47\135\x20\75\40\47\62\65\x36\x4d\47\73\15\12\44\x63\x6f\156\x66\151\147\133\47\163\145\164\164\151\x6e\x67\x27\135\133\47\x66\x69\x6c\145\x6d\157\x64\145\47\135\40\x3d\40\x30\x36\64\x34\x3b\15\xa\44\x63\x6f\x6e\x66\x69\x67\x5b\x27\163\x65\x74\x74\x69\156\147\47\x5d\133\47\141\x75\x74\150\x6b\145\171\47\135\40\75\x20\x27\x7b\x61\x75\x74\x68\x6b\x65\x79\175\47\73\15\12\44\143\x6f\156\146\x69\147\x5b\x27\163\x65\x74\164\151\156\147\47\x5d\x5b\47\146\x6f\165\x6e\x64\145\x72\x27\x5d\x20\x3d\x20\x27\61\x27\73\15\12\x24\x63\157\x6e\x66\x69\147\133\x27\x73\145\x74\x74\x69\156\x67\x27\x5d\x5b\x27\144\x65\166\x65\154\x6f\160\155\x65\156\164\47\135\40\x3d\40\60\x3b\xd\xa\44\x63\x6f\156\146\x69\x67\133\x27\163\145\164\x74\151\156\x67\47\135\x5b\47\x72\x65\x66\x65\162\x72\x65\x72\x27\135\40\x3d\x20\60\73\xd\12\xd\12\57\57\40\x2d\55\55\x2d\55\55\55\x2d\55\x2d\x2d\55\55\x2d\x2d\x2d\x2d\x2d\x2d\x2d\55\55\x2d\55\x2d\x2d\40\x20\103\x4f\x4e\106\x49\107\40\x55\x50\x4c\117\101\x44\x20\x20\x2d\x2d\55\55\55\x2d\55\x2d\x2d\x2d\x2d\x2d\55\55\x2d\x2d\x2d\x2d\x2d\x2d\55\x2d\x2d\x2d\55\55\x2d\x20\x2f\57\15\xa\x24\143\157\x6e\146\151\147\x5b\47\x75\160\154\157\x61\144\47\135\x5b\47\151\155\x61\x67\x65\47\x5d\133\x27\x65\170\164\x65\156\x74\x69\x6f\x6e\x73\47\x5d\x20\75\40\x61\162\x72\x61\x79\x28\x27\147\151\x66\x27\54\40\47\x6a\160\147\47\x2c\40\x27\152\x70\145\x67\47\54\40\47\x70\x6e\x67\47\x29\x3b\15\xa\44\x63\x6f\x6e\146\151\x67\133\47\x75\160\x6c\157\141\x64\x27\x5d\133\x27\x69\155\x61\147\145\47\135\x5b\x27\154\x69\155\151\164\47\x5d\40\x3d\40\x35\x30\x30\x30\x3b\xd\xa\44\143\x6f\x6e\x66\x69\147\133\47\x75\160\154\x6f\x61\144\x27\x5d\x5b\47\141\x74\164\x61\x63\150\144\x69\x72\x27\x5d\x20\75\x20\47\173\x61\x74\x74\141\x63\150\144\151\x72\x7d\47\x3b\15\12\44\x63\157\x6e\146\x69\x67\133\47\165\160\154\x6f\141\144\47\135\133\47\x61\x75\144\x69\157\47\x5d\133\47\145\x78\x74\x65\156\164\151\x6f\x6e\163\x27\x5d\40\x3d\x20\x61\162\162\x61\171\x28\x27\x6d\160\63\x27\x29\73\xd\12\x24\x63\157\x6e\x66\151\x67\133\x27\x75\160\154\x6f\141\x64\47\135\133\47\x61\x75\x64\151\157\47\135\133\47\154\151\x6d\151\x74\x27\135\x20\75\x20\x35\60\60\x30\73\15\12\xd\12\x2f\57\40\55\55\x2d\55\x2d\x2d\55\x2d\55\55\55\x2d\55\55\x2d\55\55\55\x2d\x2d\55\x2d\x2d\x2d\55\x2d\x20\x20\x43\x4f\x4e\106\111\107\x20\115\105\115\x43\x41\103\x48\x45\x20\40\55\55\x2d\55\55\55\55\55\x2d\x2d\x2d\55\x2d\x2d\55\55\x2d\x2d\55\x2d\x2d\x2d\x2d\55\x2d\55\x2d\x20\x2f\x2f\15\xa\44\x63\157\156\146\x69\x67\133\47\x73\145\164\164\x69\156\147\x27\x5d\x5b\x27\155\145\x6d\x63\141\143\150\x65\47\x5d\133\x27\x73\145\162\x76\x65\162\47\135\x20\x3d\x20\47\x27\73\15\xa\44\143\x6f\156\x66\151\x67\133\x27\x73\x65\x74\x74\151\x6e\x67\47\135\x5b\x27\155\x65\x6d\143\141\x63\x68\x65\47\x5d\133\47\x70\157\x72\x74\47\x5d\40\x3d\x20\x31\x31\x32\x31\61\x3b\xd\xa\44\143\x6f\x6e\146\x69\x67\x5b\47\163\x65\x74\164\151\x6e\147\47\x5d\x5b\x27\155\x65\155\x63\x61\143\x68\145\x27\x5d\x5b\47\x70\143\157\156\x6e\145\x63\164\x27\x5d\40\x3d\40\61\x3b\15\12\44\x63\x6f\156\x66\x69\147\x5b\47\x73\145\164\164\151\x6e\147\x27\x5d\x5b\47\x6d\x65\x6d\x63\141\143\150\x65\x27\x5d\133\47\x74\151\x6d\145\157\165\x74\47\135\40\75\x20\63\60\x3b\15\12\44\143\157\x6e\x66\x69\147\133\x27\163\x65\x74\164\x69\x6e\x67\x27\135\x5b\47\155\145\155\x63\x61\143\150\x65\47\135\x5b\x27\x73\145\x73\163\x69\157\x6e\x27\135\40\75\40\61\73\15\xa\xd\xa\57\x2f\40\x2d\x2d\x2d\55\x2d\55\x2d\55\55\55\x2d\x2d\x2d\55\55\55\x2d\55\x2d\x2d\55\x2d\55\55\55\55\40\x20\103\x4f\116\x46\x49\107\40\x50\x52\117\130\x59\x20\40\55\55\55\x2d\55\55\55\55\x2d\55\x2d\x2d\x2d\x2d\x2d\55\55\55\x2d\55\x2d\55\55\55\x2d\x2d\x2d\x20\x2f\x2f\15\xa\x24\x63\x6f\156\146\x69\147\133\x27\163\x65\x74\164\x69\x6e\147\x27\x5d\x5b\47\160\x72\x6f\x78\x79\x27\135\133\x27\150\x6f\163\164\x27\135\40\75\40\47\47\x3b\15\xa\44\x63\x6f\x6e\146\x69\x67\x5b\x27\x73\x65\x74\x74\x69\156\147\x27\x5d\x5b\x27\160\162\157\170\171\x27\135\133\47\141\165\x74\x68\x27\135\40\75\x20\x27\x27\x3b"; return trim($cfg); } goto H3TaU; rpxEN: v9w6A: goto TigFp; KeuZc: sIUEg: goto SCD0y; uwHXA: if ($sitename_result) { goto BXKWi; } goto PR_A7; FacWx: $finished = false; goto L6Gbz; hKG2t: $ret["\141\154\x77\x61\171\x73\x5f\160\x6f\160\x75\x6c\141\164\x65\137\x72\x61\167\x5f\160\x6f\x73\x74\x5f\144\141\164\141"]["\x6e\141\155\x65"] = "\x61\154\167\141\171\x73\137\160\x6f\x70\165\x6c\141\x74\145\137\x72\141\x77\137\x70\x6f\x73\164\x5f\144\141\164\x61\351\x85\215\xe7\xbd\256"; goto iwvol; Amsvt: goto verRH; goto oxC16; qxZC5: $password = trim($_POST["\160\x61\163\163\x77\x6f\x72\x64"]); goto HUO1l; ThDrO: function we7_build_config($server, $db_username, $db_password, $db_name, $db_prefix) { goto KjgRC; QgR6y: local_mkdirs(IA_INSTALL_ROOT . "\x2f\144\x61\164\141"); goto Ujw05; fzgEG: $link->exec("\125\x53\105\40{$db["\x6e\x61\155\145"]}"); goto JXpst; SCvwD: h9g4D: goto ua4VJ; XvA1_: try { goto TQdzO; UUuTB: scrlM: goto ntDIj; lND3t: if (substr($link->getAttribute(PDO::ATTR_SERVER_VERSION), 0, 3) > "\x34\x2e\x31") { goto scrlM; } goto aJT2A; kxAsd: if (!($link->errorCode() != "\60\60\60\60\x30")) { goto WTNRI; } goto P2Dcx; wUk88: $statement = $link->query("\123\110\117\x57\x20\104\x41\124\101\102\x41\x53\x45\x53\x20\114\x49\x4b\x45\x20\47{$db["\x6e\x61\155\x65"]}\47\73"); goto ri3ML; EEvE1: $link->exec("\123\x45\x54\x20\163\161\x6c\137\155\157\144\x65\75\47\x27"); goto XHrcb; XHrcb: if ($link->errorCode() != "\60\60\x30\x30\x30") { goto pG_4Y; } goto wUk88; IGT9Z: goto qxush; goto UUuTB; jLSUY: if (!empty($fetch)) { goto o2b3t; } goto mbmWE; ntDIj: $link->query("\x43\x52\x45\x41\x54\105\40\104\x41\124\x41\102\101\123\x45\x20\111\106\40\x4e\x4f\124\x20\105\x58\111\x53\x54\123\40\140{$db["\x6e\x61\155\145"]}\140\40\x44\105\106\101\x55\114\x54\40\x43\110\101\122\101\x43\124\105\x52\x20\123\x45\x54\x20\165\164\x66\x38"); goto xi80n; ri3ML: $fetch = $statement->fetch(); goto J5eyG; msKvC: $statement = $link->query("\x53\110\117\x57\40\x44\101\x54\x41\x42\x41\x53\x45\x53\x20\x4c\111\x4b\x45\x20\x27{$db["\156\x61\155\x65"]}\47\x3b"); goto JUyak; aQqrb: pG_4Y: goto OeamP; VbzQ0: $error .= $errorInfo[2]; goto aX7NO; OeamP: $errorInfo = $link->errorInfo(); goto dZvCh; JUyak: $fetch = $statement->fetch(); goto jLSUY; xi80n: qxush: goto cv2S1; mbmWE: $error .= "\xe6\225\xb0\346\x8d\xae\xe5\xba\x93\344\270\215\xe5\255\230\345\234\250\344\xb8\x94\345\210\233\xe5\xbb\xba\346\225\260\xe6\215\256\345\272\223\xe5\244\xb1\350\xb4\245\56"; goto q_CjR; CI6Y5: goto tRMWx; goto aQqrb; J5eyG: if (!empty($fetch)) { goto adjcs; } goto lND3t; TQdzO: $link = new PDO("\155\171\163\161\154\x3a\150\157\x73\x74\75{$db["\163\145\x72\166\x65\x72"]}\x3b\x70\x6f\x72\x74\x3d{$db["\160\157\x72\164"]}", $db["\x75\163\x65\x72\x6e\141\155\145"], $db["\160\x61\x73\x73\x77\157\x72\144"]); goto UnaxO; dZvCh: $error = $errorInfo[2]; goto BO0Fm; aX7NO: WTNRI: goto CI6Y5; cv2S1: adjcs: goto msKvC; UnaxO: $link->exec("\123\x45\124\40\x63\150\x61\x72\x61\x63\164\145\162\x5f\163\x65\164\137\x63\x6f\x6e\156\145\x63\164\151\157\x6e\75\x75\x74\x66\x38\x2c\40\x63\150\141\162\141\x63\x74\x65\x72\x5f\163\x65\164\137\162\145\x73\x75\x6c\x74\x73\75\165\x74\x66\x38\x2c\40\x63\x68\x61\x72\141\x63\x74\145\x72\x5f\x73\x65\x74\x5f\x63\x6c\151\x65\x6e\164\x3d\142\x69\156\x61\x72\171"); goto EEvE1; q_CjR: o2b3t: goto kxAsd; BO0Fm: tRMWx: goto Oua8X; P2Dcx: $errorInfo = $link->errorInfo(); goto VbzQ0; aJT2A: $link->query("\103\122\105\101\x54\x45\x20\x44\x41\x54\101\x42\x41\x53\105\40\111\106\40\116\117\124\x20\x45\x58\x49\123\x54\123\x20\140{$db["\x6e\x61\155\x65"]}\140"); goto IGT9Z; Oua8X: } catch (PDOException $e) { goto HlFze; JMdLd: $error = "\xe6\202\xa8\xe7\232\204\xe6\x95\xb0\xe6\215\xae\xe5\272\223\xe8\256\xbf\xe9\227\xae\347\224\250\346\x88\267\xe5\x90\215\xe6\x88\x96\346\x98\257\xe5\257\206\xe7\240\201\351\x94\x99\xe8\257\xaf\56"; goto LLc9D; j0sWp: D4_eo: goto JMdLd; HlFze: $error = $e->getMessage(); goto AO0NS; vLZFw: $error = iconv("\x67\x62\153", "\x75\x74\146\x38", $error); goto WBu7i; LLc9D: wMSdR: goto WfRw0; AO0NS: if (strpos($error, "\101\143\x63\145\x73\163\x20\144\145\x6e\x69\145\144\40\146\x6f\x72\40\x75\163\x65\162") !== false) { goto D4_eo; } goto vLZFw; WBu7i: goto wMSdR; goto j0sWp; WfRw0: } goto IK8sx; iPw2M: return false; goto SCvwD; aphjs: $config = str_replace(array("\x7b\x64\142\55\163\145\162\166\x65\162\x7d", "\173\x64\142\x2d\165\x73\x65\x72\x6e\x61\155\145\175", "\x7b\144\x62\x2d\160\x61\163\x73\167\x6f\x72\144\175", "\173\144\x62\55\160\x6f\162\x74\175", "\x7b\x64\x62\55\156\x61\155\x65\x7d", "\173\144\x62\x2d\164\141\142\x6c\x65\160\x72\145\x7d", "\173\143\x6f\x6f\x6b\x69\145\x70\162\145\175", "\x7b\x61\x75\164\150\153\x65\171\175", "\173\x61\164\164\x61\143\x68\x64\x69\x72\175"), array($db["\163\145\162\166\x65\162"], $db["\x75\163\145\162\x6e\141\155\x65"], $db["\160\x61\163\163\167\157\x72\144"], $db["\160\x6f\x72\x74"], $db["\156\141\155\145"], $db["\x70\162\145\x66\x69\170"], $cookiepre, $authkey, "\141\164\164\x61\x63\150\155\145\156\164"), $config); goto QgR6y; EVRO0: $db = array("\163\145\162\166\x65\162" => $pieces[0], "\160\157\162\164" => !empty($pieces[1]) ? $pieces[1] : "\63\63\x30\x36", "\165\163\145\162\156\141\155\x65" => $db_username, "\160\141\x73\163\167\157\x72\x64" => $db_password, "\160\x72\x65\146\151\x78" => $db_prefix, "\156\x61\155\x65" => $db_name); goto XvA1_; VsT6w: return $error; goto sj0Ud; JXpst: $statement = $link->query("\123\110\117\x57\x20\124\x41\102\x4c\x45\123\40\114\111\x4b\105\40\47{$db["\160\162\145\146\x69\170"]}\x25\x27\x3b"); goto L2jjp; ua4VJ: $pieces = explode("\72", $server); goto EVRO0; kgeyY: $cookiepre = local_salt(4) . "\x5f"; goto TvA5Z; ngf8W: bbx2k: goto IC692; L2jjp: if (!$statement->fetch()) { goto bbx2k; } goto guNIq; sj0Ud: uf9Mz: goto fzgEG; KjgRC: if (!(empty($server) || empty($db_username) || empty($db_password) || empty($db_name))) { goto h9g4D; } goto iPw2M; guNIq: return "\346\202\250\347\x9a\x84\xe6\x95\260\346\215\xae\xe5\272\x93\xe4\270\215\344\xb8\xba\347\xa9\272\357\274\x8c\350\xaf\267\351\x87\215\346\226\xb0\345\273\272\347\253\213\xe6\225\260\346\x8d\xae\345\272\223\346\210\226\346\x98\257\xe6\xb8\x85\347\xa9\272\xe8\257\xa5\346\x95\xb0\346\215\xae\xe5\xba\x93\xe6\x88\226\346\x9b\264\346\224\xb9\xe8\241\xa8\345\211\215\xe7\xbc\200\357\274\201"; goto ngf8W; TvA5Z: $authkey = local_salt(8); goto aphjs; IC692: $config = local_config(); goto kgeyY; Ujw05: $result = file_put_contents(IA_INSTALL_ROOT . "\57\x64\x61\164\141\x2f\x63\157\x6e\146\151\147\56\x70\x68\160", $config); goto gPWl9; gPWl9: return $result !== false ? true : false; goto TLUut; IK8sx: if (empty($error)) { goto uf9Mz; } goto VsT6w; TLUut: } goto wlao2; gghFT: $callback = urlencode($url); goto ifL34; WBwTf: define("\101\x50\111\x5f\x55\120\104\x41\124\105\x5f\x53\111\x54\105\116\101\115\x45", API_HOST . "\x2f\x73\x69\164\145\57\162\145\147\x69\x73\x74\145\162\x2f\162\145\x6e\141\155\x65"); goto yvxxG; QewBX: header("\114\x6f\143\141\x74\151\157\x6e\x3a\x20" . $siteroot . "\57\x69\x6e\163\x74\141\154\x6c\x2e\x70\150\160"); goto XHgya; ZLb80: $chunk_total = we7_getcookie("\143\150\x75\x6e\153\x5f\164\157\x74\141\154"); goto KY_lg; tVixI: $result = array(); goto s_8GZ; PUufY: if (!file_exists(IA_INSTALL_ROOT . "\x2f\143\150\165\x6e\x6b\137" . $chunk_num)) { goto v9w6A; } goto WomHC; a01c6: exit(we7_error(420, $database_result)); goto ahMVR; E9TcZ: define("\x49\x41\137\x49\x4e\x53\124\101\x4c\x4c\137\122\x4f\x4f\x54", str_replace("\x5c", "\57", dirname(__FILE__))); goto nI6iX; n8RUi: exit(we7_error(0, "\163\165\143\143\145\x73\x73")); goto q_3NL; Y1NN8: lkfoQ: goto B58vV; a1lRK: function we7_register_site() { goto Cek6p; kKba6: $post = array("\141\143\143\145\x73\163\137\164\157\153\145\x6e" => $accesstoken, "\x6e\x61\x6d\145" => $siteroot . "\xe7\232\204\347\253\231\xe7\202\271", "\165\x72\x6c" => $siteroot, "\x76\145\x72\163\x69\x6f\156" => $version, "\x72\x65\154\145\141\x73\x65" => $release, "\143\141\x6c\154\x62\141\x63\153" => $callback); goto z_vHN; SyKro: $callback = urlencode($siteroot . "\x2f\151\x6e\x73\x74\141\x6c\154\x2e\x70\x68\x70\77\163\164\x65\160\x3d\162\x65\x67\x69\x73\x74\x65\162\x5f\x63\x61\x6c\x6c\x62\x61\143\x6b"); goto kKba6; z_vHN: $data = we7_request_api(API_OAUTH_REGISTER_SITE, $post); goto sJ_mH; IaoSo: $version = IMS_VERSION; goto CeOYD; xt6K0: define("\x49\116\x5f\x49\101", true); goto mYDpH; sJ_mH: if (is_array($data) && isset($data["\145\162\x72\157\162"])) { goto XKBA8; } goto lz7jc; lHcMR: caxM9: goto ttPxM; JDYwO: return $data["\145\x72\x72\x6f\x72"]; goto lHcMR; oao9k: goto caxM9; goto BOjJY; lz7jc: return true; goto oao9k; BOjJY: XKBA8: goto JDYwO; mYDpH: require IA_INSTALL_ROOT . "\x2f\146\x72\x61\155\x65\167\157\x72\x6b\57\166\x65\x72\163\151\157\156\x2e\x69\156\143\56\x70\x68\x70"; goto IaoSo; CeOYD: $release = IMS_RELEASE_DATE; goto SyKro; Cek6p: global $siteroot, $accesstoken; goto xt6K0; ttPxM: } goto uKJPb; s_8GZ: foreach ($ret as $key => $value) { goto Yqb71; KWxD_: $result[] = $value; goto RJ1zr; CTCYv: bs56J: goto mzAid; Fr18x: if (!$value["\x66\141\x69\x6c\145\144"]) { goto f9kSW; } goto HNuJI; HNuJI: $value["\x68\x61\x6e\144\154\x65"] = "\x68\x74\x74\x70\x73\x3a\x2f\x2f\142\142\x73\x2e\167\x65\67\x2e\x63\143\x2f\164\x68\x72\x65\x61\144\x2d\63\65\66\64\x2d\61\x2d\61\56\150\x74\155\x6c"; goto KWxD_; Yqb71: if (!(version_compare(PHP_VERSION, "\67\56\x30\56\60") >= 0 && in_array($key, array("\x6d\x63\162\x79\x70\x74", "\x61\154\x77\141\x79\x73\137\x70\x6f\160\x75\x6c\141\164\x65\x5f\162\141\167\137\160\157\163\164\137\x64\x61\x74\x61")))) { goto SyMvP; } goto EjqhT; PRnaX: SyMvP: goto Fr18x; RJ1zr: f9kSW: goto CTCYv; EjqhT: goto bs56J; goto PRnaX; mzAid: } goto Sdj2b; rCYuD: WOIRB: goto Jyiax; HU1nk: exit(we7_error(400, "\344\277\xae\xe6\224\271\347\x94\250\346\x88\267\345\x90\x8d\xe5\xaf\206\347\240\x81\345\244\261\350\264\245\56")); goto p0hud; O1vNc: $ret["\x73\x65\163\x73\151\x6f\x6e"]["\x6e\141\155\x65"] = "\x73\145\x73\x73\x69\157\156\56\x61\165\164\157\137\163\164\141\162\x74\345\274\200\xe5\x90\xaf"; goto mKNfx; F3F1D: WPD6n: goto Ec8JN; Zbl1S: qUSf8: goto dguci; acQH9: $auth = @json_decode(base64_decode($post), true); goto gLqma; r3htK: $ret["\x64\157\155"]["\x66\x61\x69\x6c\x65\144"] = true; goto tS3B6; ESvo8: $ret["\x75\x70\x6c\x6f\x61\x64"]["\162\x65\163\165\154\x74"] = $server["\x75\160\154\x6f\141\x64"]; goto yKBbu; r0NE6: if (!($action == "\162\x65\147\x69\x73\x74\145\162\x5f\x63\x61\154\x6c\142\x61\143\153")) { goto MhVyK; } goto a6Ldf; j8l1y: error_reporting(0); goto OGlKu; HHNfe: $db_username = trim($_POST["\x75\163\x65\162\x6e\141\155\145"]); goto xUSSx; kfY4c: if (!($action == "\x6c\x6f\x67\x69\156")) { goto U5WM4; } goto k3D1u; icGn9: $handle_result = we7_handle_chunk(); goto F9QKm; r4GZs: VaO75: goto kfY4c; H4Hid: $action = trim($_GET["\x73\x74\x65\x70"]); goto TWzYn; kdS1l: $sitename_result = we7_update_sitename($sitename); goto uwHXA; SxO7m: $ret["\141\154\167\x61\171\x73\137\x70\x6f\160\x75\154\x61\164\x65\x5f\162\x61\x77\137\x70\157\x73\x74\x5f\144\141\164\141"]["\x66\141\x69\x6c\x65\x64"] = @ini_get("\141\154\167\141\x79\x73\x5f\x70\x6f\x70\x75\154\x61\x74\x65\137\x72\141\167\x5f\160\157\163\164\137\144\x61\x74\141") != "\55\61"; goto hKG2t; GER_g: $result = file_put_contents("\56\x2f\x63\x68\165\x6e\153\x5f" . $chunk_num, $data); goto rESVc; LqAIq: bGCfF: goto gf7NV; HzI3p: exit(we7_error(400, $chunk_num)); goto cHCW5; cHCW5: goto qXqsn; goto m1bIC; PR_A7: exit(we7_error(400, "\xe4\xbf\256\xe6\x94\271\347\253\231\347\202\271\xe5\x90\x8d\xe7\xa7\xb0\xe5\244\261\350\264\245\56")); goto VHmQe; CVfXj: exit(we7_error(400, "\350\257\267\351\207\x8d\xe6\226\xb0\347\x99\273\xe5\275\x95\x2e")); goto UBt1R; VHmQe: BXKWi: goto LqAIq; DWqVB: if (file_exists(IA_INSTALL_ROOT . "\x2f\x63\150\165\x6e\x6b\x5f" . $i)) { goto qrg8p; } goto FacWx; Lqgc1: if (!($i <= $chunk_total)) { goto sIUEg; } goto DWqVB; W9qMU: $ret["\146\157\160\x65\156"]["\162\145\163\165\x6c\164"] = "\xe4\xb8\x8d\xe6\224\257\346\214\201\x66\157\x70\145\x6e"; goto Kri0r; O8cQG: exit(we7_error(400, "\xe6\225\260\xe6\215\xae\xe9\x94\231\350\xaf\257\x2e")); goto gU7_r; hiybN: $ret["\166\x65\162\163\x69\157\156"]["\x66\141\151\x6c\x65\x64"] = true; goto u_nLk; w4T7v: if (file_exists(IA_INSTALL_ROOT . "\x2f\x64\x61\164\x61\57\x64\142\x2e\154\157\143\153")) { goto RKjSy; } goto ckfxI; OIDVs: RKtWE: goto e6qQy; DsrdL: function we7_need_extension() { return array("\x7a\x69\x70", "\160\144\x6f", "\160\x64\x6f\x5f\x6d\x79\163\161\154", "\x6f\160\145\156\x73\x73\154", "\147\144", "\155\x62\163\x74\x72\151\x6e\x67", "\155\143\x72\x79\x70\164", "\143\165\x72\154"); } goto a2e0j; FAxgj: $ret["\146\x6f\160\x65\156"]["\x6f\153"] = @ini_get("\141\x6c\154\x6f\167\x5f\x75\x72\x6c\137\x66\157\x70\145\156") && function_exists("\x66\163\x6f\x63\153\157\x70\145\x6e"); goto Hs4xU; z0lXa: lHdEA: goto Dkq6y; mKNfx: $ret["\x73\145\163\163\151\157\156"]["\x72\x65\163\x75\154\164"] = "\347\263\273\347\xbb\x9f\163\145\x73\163\151\x6f\x6e\56\141\x75\x74\x6f\x5f\163\164\x61\162\x74\345\xbc\x80\345\x90\xaf"; goto DX880; SF3X5: exit(we7_error(433, "\x61\143\143\x65\163\163\x74\157\x6b\145\156\x20\x65\x78\160\x69\162\x65\x64\x2e")); goto LszA1; bwz2E: DC3yH: goto PUufY; Kri0r: dcHDP: goto CYFm_; yb3w1: function we7_http_response_parse($data) { goto qlwTu; IX1ES: BeM5d: goto y6LyT; nfwnc: $split1[0] = substr($data, 0, $pos); goto OMkCC; qlwTu: $rlt = array(); goto ic3SU; o3o1u: $header = explode("\xd\xa", $split2[1]); goto r805g; ic3SU: $pos = strpos($data, "\xd\12\15\xa"); goto nfwnc; LCG5J: preg_match("\x2f\x5e\x28\x5c\123\53\51\x20\50\x5c\x53\53\x29\x20\50\56\52\51\x24\x2f", $split2[0], $matches); goto JenDq; bnBEh: $rlt["\x72\x65\x73\x70\x6f\156\163\x65\154\151\156\145"] = !empty($split2[0]) ? $split2[0] : ''; goto o3o1u; HV1Ev: return we7_http_response_parse($rlt["\143\157\x6e\164\x65\x6e\164"]); goto DDqoM; D7ity: $rlt["\143\x6f\x6e\164\145\x6e\x74"] = gzdecode($rlt["\143\157\x6e\x74\145\x6e\164"]); goto IX1ES; oGcrp: if (!($rlt["\x63\157\144\145"] == "\61\60\60")) { goto K41tr; } goto HV1Ev; y6LyT: $rlt["\155\145\x74\141"] = $data; goto oGcrp; QmNep: $split2 = explode("\xd\xa", $split1[0], 2); goto LCG5J; XAYqA: qgP0p: goto BBshy; p5Pkd: return $rlt; goto NSpWt; BlI3S: if (!($isgzip && function_exists("\x67\x7a\x64\x65\143\x6f\x64\x65"))) { goto BeM5d; } goto D7ity; zxSAM: $rlt["\163\164\x61\x74\x75\x73"] = !empty($matches[3]) ? $matches[3] : "\117\113"; goto bnBEh; r805g: $isgzip = false; goto u3Fvv; DDqoM: K41tr: goto p5Pkd; JenDq: $rlt["\x63\157\x64\x65"] = !empty($matches[2]) ? $matches[2] : 200; goto zxSAM; OMkCC: $split1[1] = substr($data, $pos + 4, strlen($data)); goto QmNep; u3Fvv: foreach ($header as $v) { goto eNetM; AE8Gv: g0RhD: goto QnmnQ; QnmnQ: if (!(!$isgzip && strtolower($key) == "\x63\157\156\x74\145\156\164\55\145\x6e\x63\157\144\x69\156\x67" && strtolower($value) == "\x67\x7a\151\160")) { goto HeL6v; } goto ZBn1W; EVFAE: C_bOn: goto QG3kQ; fDNk7: if (!empty($rlt["\x68\x65\141\144\145\162\163"][$key])) { goto dZ3g6; } goto YVVT_; YVVT_: $rlt["\150\145\141\x64\145\162\x73"][$key] = $value; goto VmJeh; GF1Ep: $rlt["\x68\145\x61\x64\145\162\x73"][$key][] = $value; goto bXdJt; e60gg: dZ3g6: goto UeIqo; ZBn1W: $isgzip = true; goto NMpNJ; NMpNJ: HeL6v: goto EVFAE; AaOPz: zDGst: goto GF1Ep; bXdJt: goto g0RhD; goto e60gg; P_VLU: unset($rlt["\150\x65\x61\144\145\162\163"][$key]); goto Ogfgv; Ogfgv: $rlt["\150\145\141\144\145\x72\x73"][$key][] = $temp; goto unvvw; UeIqo: $temp = $rlt["\150\145\x61\144\145\x72\163"][$key]; goto P_VLU; mFlLu: $key = substr($v, 0, $pos); goto QBDJk; eNetM: $pos = strpos($v, "\x3a"); goto mFlLu; unvvw: $rlt["\150\145\141\144\145\x72\163"][$key][] = $value; goto AE8Gv; QBDJk: $value = trim(substr($v, $pos + 1)); goto Poy3v; Poy3v: if (is_array($rlt["\x68\145\141\x64\x65\x72\x73"][$key])) { goto zDGst; } goto fDNk7; VmJeh: goto g0RhD; goto AaOPz; QG3kQ: } goto XAYqA; BBshy: $rlt["\143\157\156\164\145\156\x74"] = $split1[1]; goto BlI3S; NSpWt: } goto UcHUv; YO28L: $ret["\x66\157\160\145\156"]["\x66\141\x69\154\145\144"] = true; goto hf7no; e6qQy: exit(we7_error(0, "\x73\x75\143\x63\145\163\163")); goto r4GZs; i05js: $ret["\144\x61\164\141"]["\x6f\x6b"] = local_writeable(IA_INSTALL_ROOT . "\57\144\x61\x74\x61"); goto cIQhF; Dkq6y: $accesstoken = we7_get_accesstoken(); goto F37yw; LSiKi: require IA_INSTALL_ROOT . "\x2f\146\162\x61\x6d\x65\x77\157\x72\153\57\142\x6f\x6f\164\x73\x74\162\x61\x70\56\151\156\x63\x2e\160\x68\160"; goto UvOvG; IgrKw: function local_salt($length = 8) { goto z4KAQ; z4KAQ: $result = ''; goto GXZqx; tzaqT: $result .= sha1(uniqid('', true)); goto XC0uA; Ar4g1: return substr($result, 0, $length); goto NLLIo; UBjM4: if (!(strlen($result) < $length)) { goto V2qwQ; } goto tzaqT; A_DLe: V2qwQ: goto Ar4g1; GXZqx: t5z89: goto UBjM4; XC0uA: goto t5z89; goto A_DLe; NLLIo: } goto DNEDZ; Xo6PV: $ret["\141\163\160\137\x74\141\147\163"]["\157\153"] = ini_get("\141\x73\160\137\x74\141\147\x73"); goto U7FWX; gU7_r: MhVyK: goto vgVxH; tlZPu: GL8nJ: goto umB_p; H3TaU: function local_mkdirs($path) { goto MzKUI; Zv0YF: mkdir($path); goto I2L8o; I2L8o: RnbJB: goto hnq92; MzKUI: if (is_dir($path)) { goto RnbJB; } goto QClah; QClah: local_mkdirs(dirname($path)); goto Zv0YF; hnq92: return is_dir($path); goto b7Arw; b7Arw: } goto woJEY; f_lnv: $ret["\141\163\160\x5f\164\141\x67\x73"]["\146\x61\x69\x6c\x65\x64"] = true; goto gIUjp; oxC16: jHn8J: goto eW_sl; kOysc: verRH: goto rCYuD; hML1Y: goto KrlMK; goto KeuZc; VMdI0: $ret["\162\x6f\157\164"]["\146\141\x69\x6c\145\144"] = true; goto VcnL0; uxWKu: tJ4w6: goto b2nAe; k3D1u: $sitename = trim($_POST["\x73\151\164\145\x6e\x61\x6d\145"]); goto hUYTm; b2nAe: exit(we7_error(0, "\x73\165\143\143\145\163\163")); goto sJ4A1; BcYMz: ob_start(); goto E9TcZ; Vys03: $ret["\163\x65\x73\163\151\x6f\156"]["\x6f\x6b"] = ini_get("\x73\145\x73\163\x69\x6f\156\x2e\x61\165\164\x6f\137\x73\x74\x61\x72\x74"); goto kQyRx; o1AVv: sVclR: goto tVixI; QQSdb: $ret["\163\x65\x73\163\151\157\156"]["\146\x61\151\154\145\144"] = true; goto O1vNc; h8tnE: IHdP4: goto Vys03; RrBkJ: if (!($register_site_result !== true)) { goto s6zsx; } goto L9Tdy; Y6JFM: function we7_update_user($username, $password) { goto xlSeP; sLVhc: $cookie["\150\141\163\x68"] = md5($password . $userinfo["\x73\x61\154\x74"]); goto L_mRe; JLqP6: $cookie = array("\154\x61\x73\164\166\151\163\151\164" => '', "\x6c\141\x73\x74\x69\x70" => ''); goto rtLVv; rtLVv: $cookie["\165\x69\144"] = $userinfo["\x75\x69\x64"]; goto sLVhc; yN6_I: setcookie($_W["\x63\x6f\x6e\x66\x69\147"]["\x63\157\157\153\x69\x65"]["\x70\x72\x65"] . "\137\x5f\163\145\x73\x73\x69\157\x6e", $session, 0, "\x2f", '', $secure, true); goto gSU7D; L_mRe: $session = install_authcode(json_encode($cookie), "\x65\156\x63\157\x64\145", $_W["\x63\x6f\156\146\x69\147"]["\x73\x65\x74\164\151\x6e\147"]["\x61\165\164\150\153\145\x79"]); goto GkFYM; GkFYM: $secure = $is_https ? 1 : 0; goto yN6_I; gQmpT: $password = user_hash($password, $userinfo["\163\141\154\x74"]); goto MakLg; MakLg: $result = pdo_update("\165\163\145\x72\x73", array("\x75\x73\145\x72\156\x61\155\x65" => $username, "\x70\141\163\x73\167\157\162\144" => $password), array("\165\x69\144" => $userinfo["\165\x69\144"])); goto JLqP6; xlSeP: global $_W, $is_https; goto CYuCx; gSU7D: return $result ? true : false; goto EcbX_; GTS4v: $userinfo = pdo_get("\x75\x73\145\x72\x73", array("\x75\163\145\162\x6e\141\155\145" => "\141\x64\155\151\x6e")); goto gQmpT; CYuCx: load()->model("\x75\163\x65\162"); goto GTS4v; EcbX_: } goto MS1UA; eIoU3: define("\101\120\111\x5f\x47\x45\124\137\103\x48\x55\x4e\x4b\x5f\x50\101\103\x4b\101\107\105", API_HOST . "\57\x75\x74\x69\154\57\x70\141\143\x6b\141\147\x65\x2f\x69\156\x73\164\141\x6c\154"); goto GUTQo; PK36L: function we7_http_request($url, $post = array()) { goto udZvQ; hklIF: h80ll: goto vmHdP; Mv1RD: vpBPP: goto eCNNP; U3cpr: curl_setopt($ch, CURLOPT_POSTFIELDS, $post); goto hklIF; Xpeum: curl_setopt($ch, CURLOPT_URL, $url); goto v8dv_; ur4I_: curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER["\110\124\x54\x50\x5f\x55\x53\x45\122\137\101\x47\105\x4e\x54"]); goto U0rq8; AMuuj: if ($errno || empty($data)) { goto NeWQk; } goto O9bDs; CLTf3: return array("\x65\x72\162\x6e\x6f" => $errno, "\x65\162\162\157\x72" => $error); goto Mv1RD; xOzsG: if (!$post) { goto h80ll; } goto yngIY; Zz0op: @curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); goto n0fVu; v8dv_: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto Zz0op; yngIY: curl_setopt($ch, CURLOPT_POST, 1); goto U3cpr; udZvQ: $ch = curl_init(); goto Xpeum; O9bDs: return we7_http_response_parse($data); goto RCwP8; Piqh8: NeWQk: goto CLTf3; gubya: $errno = curl_errno($ch); goto yyw5f; RCwP8: goto vpBPP; goto Piqh8; n0fVu: curl_setopt($ch, CURLOPT_HEADER, 1); goto xOzsG; S03NL: curl_close($ch); goto AMuuj; U0rq8: $data = curl_exec($ch); goto gubya; yyw5f: $error = curl_error($ch); goto S03NL; vmHdP: curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 60); goto jC6I7; jC6I7: curl_setopt($ch, CURLOPT_TIMEOUT, 60); goto tgWxd; tgWxd: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); goto kDmNw; kDmNw: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); goto ur4I_; eCNNP: } goto yb3w1; LBddI: exit(we7_error(0, array("\164\x6f\164\141\154" => $data["\x63\150\x75\156\x6b\x5f\164\x6f\164\x61\154"]))); goto Amsvt; xhc3j: yJ7d9: goto H2Qj2; Uzjuv: if (!($chunk_num > $chunk_total)) { goto DC3yH; } goto XlG7B; yKBbu: Rka_o: goto WpVux; Z4DZp: if (!(is_array($data) && isset($data["\x65\162\162\157\162"]))) { goto Cwap2; } goto ZjpoQ; V0TrI: if (empty($result)) { goto nExfM; } goto egkqt; NpIUb: if (is_array($data) && isset($data["\x65\162\x72\x6f\162"])) { goto jHn8J; } goto vQ4aq; DiP1e: $ret["\x72\x6f\157\x74"]["\157\153"] = local_writeable(IA_INSTALL_ROOT); goto i0lHe; y_o7N: howlN: goto Uzjuv; GoVc0: goto YoMfa; goto eek9q; HBTLt: exit; goto xMgwl; eW_sl: if ($data["\145\x72\162\x6f\x72"] == 401) { goto GL8nJ; } goto wZmTT; Ec8JN: if (!($action == "\x63\150\x75\x6e\153\x74\x6f\164\141\154")) { goto WOIRB; } goto kFUQq; lAama: rS6oE: goto vnyKc; tOp4C: exit(we7_error(421, "\xe5\xae\211\xe8\243\x85\xe5\214\205\xe4\xb8\215\xe5\xae\214\xe6\225\264\56")); goto Gwocg; DmKGz: we7_setcookie("\143\x68\x75\x6e\153\x5f\x74\157\164\x61\154", $data["\x63\150\x75\x6e\x6b\137\x74\x6f\164\141\154"]); goto LBddI; eek9q: Sal7_: goto SF3X5; CYFm_: $ret["\x64\157\155"]["\x6f\153"] = class_exists("\x44\x4f\115\x44\x6f\x63\x75\155\145\x6e\x74"); goto rgrJ5; UcHUv: function we7_request_api($url, $post = array()) { goto see1x; wy1SY: $result = json_decode($response["\x63\x6f\x6e\164\145\x6e\x74"], true); goto ITEq9; FW8YR: goto IUuIH; goto w2KCa; iwfSP: return $response["\143\157\x6e\164\x65\156\164"]; goto FW8YR; XIInh: XDixD: goto wy1SY; w2KCa: aO4Da: goto r0rYC; ITEq9: if (is_array($result)) { goto aO4Da; } goto iwfSP; XcJJJ: return array("\x65\162\x72\157\162" => 401); goto NsPHC; R2W9a: IUuIH: goto mHMmO; n86zt: if (!($response["\x63\x6f\x64\145"] == 401)) { goto RNi95; } goto XcJJJ; T4hns: return array("\x65\x72\x72\x6f\162" => $response["\x63\157\156\x74\x65\156\x74"]); goto XIInh; NsPHC: RNi95: goto Om7oQ; see1x: $response = we7_http_request($url, $post); goto n86zt; Om7oQ: if (!($response["\143\x6f\x64\145"] != 200 || isset($response["\x65\x72\162\156\157"]))) { goto XDixD; } goto T4hns; r0rYC: return $result; goto R2W9a; mHMmO: } goto T5wpH; fMY6i: define("\x41\120\x49\x5f\117\x41\125\124\x48\137\114\117\107\111\x4e\x5f\125\122\x4c", API_HOST . "\57\x6f\141\165\x74\150\57\154\157\147\151\156\x2d\165\162\x6c\x2f\151\x6e\144\x65\170"); goto TKkjW; ny_BA: $forward = $data["\x75\x72\154"]; goto moMwz; DqqtG: function local_create_sql($schema, $local_create_sql) { goto FA8V8; QGGTf: foreach ($schema["\151\x6e\x64\x65\x78\x65\163"] as $value) { goto JEDBr; J3Rq8: oarVI: goto XDf0x; gKMJR: fUUVF: goto Gsx1K; JEDBr: $fields = implode("\x60\54\140", $value["\146\151\145\154\x64\x73"]); goto vkVyV; DRJjP: $sql .= "\120\122\111\x4d\x41\122\131\x20\113\105\x59\x20\50\140{$fields}\x60\51\54\xa"; goto vwjjr; TRxGe: $sql .= "\x55\x4e\111\121\x55\x45\x20\113\105\x59\40\140{$value["\156\x61\155\145"]}\140\x20\x28\140{$fields}\140\51\54\xa"; goto J3Rq8; vkVyV: if (!($value["\x74\x79\x70\x65"] == "\x69\x6e\144\145\x78")) { goto fUUVF; } goto PgeX2; vwjjr: X_dMe: goto PA0cU; PgeX2: $sql .= "\x4b\x45\131\40\140{$value["\156\141\155\145"]}\x60\x20\x28\x60{$fields}\140\51\54\xa"; goto gKMJR; Gsx1K: if (!($value["\x74\171\160\145"] == "\x75\x6e\x69\161\x75\145")) { goto oarVI; } goto TRxGe; XDf0x: if (!($value["\x74\171\x70\145"] == "\160\162\x69\155\141\x72\x79")) { goto X_dMe; } goto DRJjP; PA0cU: VhL2W: goto O4uD8; O4uD8: } goto cyOTw; yaJld: $engine = $local_create_sql ? $schema["\x65\x6e\147\x69\x6e\x65"] : "\115\171\111\123\x41\x4d"; goto AJeIP; yJjlU: A9vYy: goto QGGTf; qUeAu: return $sql; goto zrb4a; CZTx_: $charset = $pieces[0]; goto yaJld; cyOTw: iEeHQ: goto NWO_9; FA8V8: $pieces = explode("\137", $schema["\143\150\141\x72\x73\145\164"]); goto CZTx_; NWO_9: $sql = rtrim($sql); goto C5e88; C5e88: $sql = rtrim($sql, "\54"); goto HsfNP; V1nUT: foreach ($schema["\146\151\145\x6c\144\x73"] as $value) { goto trLpl; Alkl7: goto CTKzN; goto td39w; r5TEx: if ($value["\x69\x6e\x63\x72\x65\155\x65\x6e\x74"]) { goto TWc9c; } goto tNsLA; K4kpK: if (isset($value["\144\x65\146\141\165\154\164"])) { goto EYgh8; } goto w2Uaq; XXLwo: $signed = empty($value["\163\x69\x67\x6e\145\x64"]) ? "\40\x75\x6e\163\x69\147\x6e\145\x64" : ''; goto KiPW_; e_zkx: EYgh8: goto iiNc1; w2Uaq: $default = ''; goto Q7EEX; ZKHhR: TWc9c: goto fdFFb; KiPW_: if (empty($value["\x6e\165\154\x6c"])) { goto QcDba; } goto IXB5d; vRWQJ: wDDtT: goto pFCx1; XVcfl: FH4S4: goto r5TEx; bGtbg: goto ZZCOt; goto Lryo4; mBgf1: $length = ''; goto bGtbg; CfW3Q: ZZCOt: goto XXLwo; e6pZE: $length = "\x28{$value["\154\x65\x6e\x67\x74\x68"]}\x29"; goto CfW3Q; Q7EEX: goto FH4S4; goto e_zkx; iJ921: c78Q9: goto h_TPg; LFyYN: $null = "\40\x4e\x4f\x54\40\x4e\125\x4c\x4c"; goto VGbLo; tNsLA: $increment = ''; goto oJBLn; VGbLo: CTKzN: goto K4kpK; fdFFb: $increment = "\40\x41\125\124\117\x5f\x49\x4e\x43\x52\x45\115\x45\116\124"; goto vRWQJ; td39w: QcDba: goto LFyYN; IXB5d: $null = ''; goto Alkl7; oJBLn: goto wDDtT; goto ZKHhR; iiNc1: $default = "\40\x44\x45\106\101\x55\x4c\124\x20\x27" . $value["\x64\x65\x66\141\165\154\164"] . "\47"; goto XVcfl; Lryo4: RwF8Y: goto e6pZE; trLpl: if (!empty($value["\x6c\145\x6e\x67\164\150"])) { goto RwF8Y; } goto mBgf1; pFCx1: $sql .= "\x60{$value["\156\141\x6d\x65"]}\140\40{$value["\164\171\160\145"]}{$length}{$signed}{$null}{$default}{$increment}\x2c\12"; goto iJ921; h_TPg: } goto yJjlU; AJeIP: $sql = "\x43\x52\105\x41\x54\105\40\124\x41\102\114\105\40\111\106\40\x4e\x4f\124\x20\x45\130\111\123\x54\x53\40\140{$schema["\164\x61\142\x6c\145\156\141\155\x65"]}\x60\x20\50\12"; goto V1nUT; HsfNP: $sql .= "\12\x29\40\105\116\107\111\116\105\x3d{$engine}\x20\x44\105\106\101\125\114\x54\40\103\x48\x41\122\x53\105\124\75{$charset}\x3b\12\12"; goto qUeAu; zrb4a: } goto VmikF; LszA1: YoMfa: goto p4opc; RLjH6: a8kMY: goto i05js; I5wF_: define("\x41\x50\111\137\107\x45\x54\x5f\x50\x41\103\113\101\x47\105\137\115\x44\x35\137\x41\116\x44\x5f\x43\x48\x55\116\x4b\x54\117\x54\101\114", API_HOST . "\x2f\x75\164\151\x6c\x2f\x70\141\x63\x6b\141\x67\x65\x2f\x69\x6e\x73\x74\141\x6c\x6c"); goto eIoU3; dguci: foreach (we7_need_extension() as $extension) { goto jbbqe; rkvkL: if ($if_ok) { goto KbOpp; } goto mSz3d; mSz3d: $ret[$extension]["\146\141\x69\x6c\145\x64"] = true; goto smNKP; smNKP: $ret[$extension]["\x6e\x61\x6d\145"] = $extension . "\346\x89\251\xe5\261\x95"; goto UX4wy; fWQ01: KbOpp: goto Qqkr8; UX4wy: $ret[$extension]["\162\145\x73\x75\154\x74"] = "\xe4\xb8\x8d\346\224\xaf\xe6\x8c\201" . $extension; goto fWQ01; jbbqe: $if_ok = extension_loaded($extension); goto rkvkL; Qqkr8: ccovp: goto AeOie; AeOie: } goto o1AVv; F9QKm: if (!($handle_result !== true)) { goto t9BIH; } goto iqnTF; iLMWR: echo "\74\41\144\x6f\x63\x74\x79\x70\x65\40\x68\x74\155\154\76\15\xa\74\x68\x74\x6d\x6c\40\154\141\x6e\147\x3d\42\145\156\x22\76\xd\12\x3c\x68\x65\x61\144\76\15\xa\40\40\74\155\145\164\x61\x20\143\150\x61\x72\163\x65\x74\x3d\x22\x75\x74\146\55\70\x22\x3e\xd\12\x20\x20\x3c\164\151\x74\154\145\x3e\127\x65\x37\x49\156\x73\x74\141\x6c\154\74\x2f\164\151\164\154\145\x3e\15\xa\40\40\x3c\142\x61\x73\x65\40\150\x72\145\x66\75\x22" . $sitepath . "\57\151\156\x73\x74\x61\154\x6c\x2e\x70\150\160\x22\x3e\15\12\15\xa\x20\40\74\155\x65\x74\x61\40\156\x61\x6d\x65\75\x22\166\x69\x65\x77\160\x6f\x72\164\42\40\x63\x6f\x6e\x74\145\x6e\x74\75\42\167\x69\144\164\x68\75\144\x65\x76\151\143\x65\55\x77\151\144\164\x68\x2c\x20\x69\x6e\x69\x74\151\141\154\x2d\x73\143\x61\x6c\145\75\x31\x22\x3e\15\xa\40\40\x3c\x6c\x69\156\153\x20\162\145\x6c\75\x22\x69\143\x6f\156\42\40\164\171\x70\x65\75\42\x69\x6d\141\x67\145\x2f\x78\x2d\x69\143\157\156\x22\x20\x68\162\x65\x66\75\x2f\57\x63\x64\156\x2e\x77\x37\56\143\143\x2f\167\145\x37\x2d\151\156\163\164\x61\154\x6c\57\x66\141\166\x69\x63\x6f\x6e\x2e\151\x63\x6f\42\x3e\15\12\74\x6c\x69\156\x6b\x20\162\x65\154\x3d\42\163\x74\171\154\x65\x73\150\145\x65\164\x22\x20\x68\x72\x65\x66\75\42\x2f\x2f\143\x64\156\56\x77\x37\x2e\x63\143\57\x77\x65\67\55\x69\x6e\x73\164\x61\154\154\57\x73\164\x79\154\145\x73\56\143\163\163\77\x76\x3d" . time() . "\42\x3e\74\x2f\150\145\141\144\76\15\12\x3c\x62\x6f\144\171\x3e\15\xa\40\40\x3c\x61\160\x70\55\x72\157\x6f\164\76\74\x2f\141\x70\x70\55\162\x6f\x6f\164\76\15\12\x3c\x73\143\162\x69\x70\164\x20\x74\171\160\145\75\x22\x74\x65\170\x74\x2f\x6a\x61\166\141\163\143\x72\151\x70\x74\x22\40\163\x72\143\75\42\x2f\x2f\143\x64\156\56\x77\67\x2e\143\x63\x2f\167\145\67\55\x69\156\163\x74\x61\x6c\154\57\x72\x75\156\164\151\x6d\145\x2e\x6a\163\77\166\75" . time() . "\x22\76\x3c\57\x73\x63\x72\151\x70\164\x3e\x3c\x73\143\x72\151\x70\164\40\164\171\160\x65\x3d\x22\x74\x65\x78\164\x2f\x6a\141\166\x61\163\143\x72\x69\x70\164\x22\40\163\x72\143\75\x22\57\57\143\144\x6e\56\167\x37\x2e\143\x63\57\167\145\67\x2d\x69\156\163\x74\141\x6c\154\57\160\157\154\171\x66\151\x6c\154\163\x2e\x6a\163\x3f\166\x3d" . time() . "\x22\x3e\74\x2f\x73\x63\162\151\x70\164\x3e\x3c\163\143\162\x69\x70\x74\x20\x74\171\x70\145\x3d\x22\164\x65\170\x74\57\x6a\141\x76\x61\163\x63\x72\151\160\x74\x22\x20\163\x72\x63\75\x22\x2f\x2f\143\144\x6e\56\x77\x37\x2e\x63\143\57\x77\x65\67\55\151\x6e\x73\164\141\154\x6c\57\x6d\x61\151\x6e\x2e\152\163\x3f\x76\75" . time() . "\42\x3e\x3c\x2f\163\x63\162\151\x70\x74\76\74\57\x62\157\x64\x79\76\xd\12\74\57\x68\x74\x6d\154\76"; goto b2ek_; Hl1ak: $db_prefix = trim($_POST["\x70\162\x65\x66\151\170"]); goto f1i_d; m1bIC: eEoq5: goto Gh73O; Gwocg: BlBfY: goto w4T7v; egkqt: exit(we7_error(434, $result)); goto SxN_O; a2e0j: function we7_get_accesstoken() { goto P55D8; iCU5g: dIJZn: goto PA3sE; mUd8i: $accesstoken = json_decode($cookie_accesstoken, true); goto I2524; cletB: return $accesstoken["\141\143\143\145\163\x73\x54\x6f\153\145\156"]; goto iCU5g; I2524: if (!(!empty($accesstoken) && !empty($accesstoken["\141\x63\143\145\163\x73\124\x6f\153\145\156"]) && $accesstoken["\145\170\160\151\162\145\x54\151\155\x65"] > time())) { goto dIJZn; } goto cletB; PA3sE: return ''; goto sqgnd; P55D8: $cookie_accesstoken = we7_getcookie("\x61\x63\x63\145\x73\x73\x74\x6f\153\145\x6e"); goto mUd8i; sqgnd: } goto yjYth; Hs4xU: if ($ret["\146\157\x70\145\x6e"]["\x6f\153"]) { goto dcHDP; } goto YO28L; hUYTm: $username = trim($_POST["\165\163\145\x72\156\141\155\x65"]); goto qxZC5; b2ek_: function local_writeable($dir) { goto MjVQc; SWQW1: if ($fp = fopen("{$dir}\x2f\x74\145\x73\x74\x2e\164\x78\x74", "\x77")) { goto NKcHC; } goto d8OgR; thFzb: tOjGk: goto GvVtK; M4Wcj: EFceS: goto VKcQS; d8OgR: $writeable = 0; goto tvAXx; tvAXx: goto tOjGk; goto W5VDe; QL1OB: unlink("{$dir}\57\164\x65\163\164\56\x74\x78\164"); goto HMJ4t; AisDf: return $writeable; goto s3qWY; HMJ4t: $writeable = 1; goto thFzb; oueZF: @mkdir($dir, 0777); goto M4Wcj; uzeBE: if (is_dir($dir)) { goto EFceS; } goto oueZF; W5VDe: NKcHC: goto zeg4I; MjVQc: $writeable = 0; goto uzeBE; zeg4I: fclose($fp); goto QL1OB; VKcQS: if (!is_dir($dir)) { goto fDscS; } goto SWQW1; GvVtK: fDscS: goto AisDf; s3qWY: } goto IgrKw; ShS8w: $sitepath = str_replace("\57\151\156\x73\164\141\x6c\154\56\160\150\160", '', $sitepath); goto MgneE; Y86Jl: $ret["\x64\157\155"]["\162\145\x73\165\x6c\164"] = "\xe6\xb2\241\xe6\x9c\x89\xe5\x90\xaf\347\224\250\x44\117\115\104\157\143\165\x6d\x65\156\x74"; goto h8tnE; B58vV: if (!($action == "\145\x6e\x76\151\x72\157\156\155\145\x6e\x74")) { goto WPD6n; } goto CS5oA; nI6iX: define("\103\x4f\x4f\113\x49\105\x5f\120\x52\x45", "\x77\145\67\151\x6e\163\x74\141\154\154\137"); goto etfmK; hf7no: $ret["\x66\x6f\x70\x65\x6e"]["\x6e\141\155\x65"] = "\146\x6f\160\145\156"; goto W9qMU; dsrMX: if (!(!file_exists(IA_INSTALL_ROOT . "\x2f\144\141\x74\141\x2f\143\x6f\156\146\151\x67\x2e\x70\150\160") || !empty($_POST))) { goto Rw0Z3; } goto dZJDE; trKfO: if (empty($code)) { goto qHj06; } goto qmfTE; k9dcv: if (!($server["\165\160\x6c\157\x61\144"] == "\165\x6e\x6b\156\x6f\167" || !strstr($server["\x75\x70\154\157\141\144"], "\155"))) { goto Rka_o; } goto nGeHp; BcZIC: $action = "\157\x61\x75\x74\x68"; goto xhc3j; ak7Fg: define("\111\x4e\x5f\123\131\123", true); goto LSiKi; u_nLk: $ret["\x76\x65\x72\x73\x69\x6f\x6e"]["\156\141\x6d\145"] = "\120\x48\x50\xe7\211\x88\xe6\234\254"; goto erc9W; cIQhF: if ($ret["\x64\141\x74\x61"]["\157\x6b"]) { goto qUSf8; } goto E9V7N; p_2Zf: KX21L: goto F3F1D; OxvGs: if (!(version_compare(PHP_VERSION, "\67\56\x30\56\x30") == -1)) { goto qfBM2; } goto SxO7m; wlao2: function we7_db() { goto sRwIH; da0kX: $cookie["\165\x69\x64"] = $link->lastInsertId(); goto TRD4h; BvWf_: ST1lq: goto lK6hQ; ssiSi: foreach ($dat["\x64\141\x74\x61\163"] as $data) { local_run($data, $link, $db); jSSbs: } goto uSbp8; uSbp8: PNsq0: goto M3F5O; w4B9X: require IA_INSTALL_ROOT . "\x2f\144\x61\x74\141\57\x63\157\x6e\x66\x69\x67\x2e\x70\x68\x70"; goto GU2Ts; lu0By: $secure = $is_https ? 1 : 0; goto nHQRn; sM5P3: $cookie = array("\154\141\x73\164\x76\151\x73\151\164" => '', "\154\141\x73\164\x69\x70" => ''); goto da0kX; GU2Ts: $db = array("\x73\x65\162\x76\145\162" => $config["\144\142"]["\155\141\x73\x74\x65\x72"]["\x68\157\x73\164"], "\160\x6f\x72\x74" => $config["\x64\142"]["\x6d\x61\x73\x74\145\x72"]["\x70\x6f\162\x74"], "\165\163\145\x72\x6e\x61\x6d\x65" => $config["\144\142"]["\x6d\141\163\x74\145\x72"]["\x75\163\145\162\156\x61\155\145"], "\160\x61\163\x73\167\x6f\x72\x64" => $config["\x64\142"]["\x6d\141\x73\x74\x65\x72"]["\160\x61\163\163\167\x6f\162\x64"], "\160\x72\x65\x66\x69\x78" => $config["\144\x62"]["\x6d\x61\x73\x74\x65\162"]["\x74\141\x62\x6c\145\x70\x72\x65"], "\x6e\x61\x6d\145" => $config["\x64\142"]["\155\x61\163\164\145\162"]["\144\x61\164\141\142\141\x73\x65"]); goto j3j_X; nHQRn: setcookie("{$cookiepre}\137\137\x73\x65\163\163\x69\x6f\x6e", $session, 0, "\x2f", '', $secure, true); goto Q4vYS; nY9aD: foreach ($all_engines as $engine) { goto MWL5s; xH1x3: $support_innodb = true; goto Z_BGK; MWL5s: if (!(strtolower($engine["\x45\156\147\151\x6e\145"]) == "\151\156\156\157\144\142" && in_array(strtolower($engine["\x53\165\160\160\x6f\162\x74"]), array("\x64\145\x66\141\165\x6c\164", "\171\145\x73")))) { goto JKgEL; } goto xH1x3; Z_BGK: JKgEL: goto TiBsA; TiBsA: TwcG7: goto AwpeP; AwpeP: } goto BvWf_; bbOzM: $link->exec("\123\x45\x54\x20\x63\150\141\x72\141\x63\164\x65\x72\x5f\x73\x65\164\x5f\143\157\x6e\156\x65\x63\164\151\x6f\x6e\75\165\164\146\70\54\40\x63\x68\x61\x72\141\143\164\x65\162\x5f\x73\145\x74\x5f\162\145\163\165\x6c\x74\163\x3d\165\x74\x66\70\54\x20\143\x68\x61\162\x61\x63\164\145\162\137\163\x65\x74\137\143\154\151\145\x6e\164\75\142\151\156\x61\162\171"); goto Rr2NP; q0aJf: $engines = $link->query("\x53\x48\x4f\x57\x20\x45\116\x47\111\116\x45\123\73"); goto c1WOw; n_G4N: $password = sha1("{$user["\160\141\163\163\x77\x6f\x72\144"]}\55{$salt}\x2d{$authkey}"); goto YXMpS; LxWNy: goto XSqWa; goto orzcy; lK6hQ: foreach ($dat["\163\x63\x68\x65\x6d\141\x73"] as $schema) { goto Z4iMy; GNtYO: local_run($sql, $link, $db); goto Znc1p; Znc1p: j2wBs: goto OfGGJ; Z4iMy: $sql = local_create_sql($schema, $support_innodb); goto GNtYO; OfGGJ: } goto OAVbj; IIT9e: return "\345\256\x89\xe8\xa3\205\xe5\x8c\205\xe4\xb8\x8d\xe6\xad\xa3\xe7\xa1\xae\56"; goto LxWNy; qfSUv: $session = install_authcode(json_encode($cookie), "\145\x6e\x63\157\144\145", $authkey); goto lu0By; j3j_X: $cookiepre = $config["\143\157\157\153\x69\x65"]["\160\x72\x65"]; goto h9vs1; h9vs1: $authkey = $config["\163\145\x74\164\151\x6e\147"]["\141\165\164\x68\x6b\145\171"]; goto jl0N5; YXMpS: $link->exec("\x49\116\123\x45\122\124\x20\x49\x4e\x54\117\40{$db["\x70\x72\x65\x66\151\170"]}\165\163\x65\x72\x73\40\50\165\x73\x65\x72\156\x61\155\x65\x2c\40\160\x61\163\163\x77\157\162\144\x2c\40\x73\141\x6c\164\x2c\x20\152\x6f\151\156\144\x61\164\x65\x2c\40\x67\162\x6f\165\x70\x69\x64\54\x20\163\x74\x61\x74\x75\x73\51\40\x56\101\114\x55\105\x53\50\x27{$user["\165\163\145\162\156\141\x6d\145"]}\47\54\x20\47{$password}\x27\54\40\47{$salt}\47\x2c\x20\47" . time() . "\x27\x2c\x20\x31\x2c\40\x32\51"); goto sM5P3; c1WOw: $all_engines = $engines->fetchAll(); goto nY9aD; CIeKd: $support_innodb = false; goto q0aJf; M3F5O: XSqWa: goto VyYyZ; TRD4h: $cookie["\150\141\163\150"] = md5($password . $salt); goto qfSUv; NeGxT: return "\345\xae\x89\350\243\205\xe5\x8c\x85\xe4\270\x8d\346\xad\243\347\xa1\xae\x2c\x20\xe6\x95\260\346\215\xae\xe5\xae\x89\xe8\xa3\205\350\204\232\xe6\x9c\xac\xe7\xbc\272\xe5\xa4\xb1\x2e"; goto uE3JO; jl0N5: $link = new PDO("\x6d\x79\163\161\154\72\x64\x62\156\x61\x6d\x65\x3d{$db["\x6e\x61\x6d\x65"]}\x3b\x68\x6f\x73\164\x3d{$db["\x73\145\162\166\145\162"]}\73\160\157\162\164\x3d{$db["\160\x6f\162\164"]}", $db["\x75\x73\145\x72\156\x61\x6d\x65"], $db["\x70\141\163\163\x77\157\x72\x64"]); goto bbOzM; la0pt: define("\111\x4e\x5f\x49\101", true); goto w4B9X; DKwsW: $dat = (require $dbfile); goto E8V2l; y85lN: $salt = local_salt(8); goto n_G4N; VyYyZ: $user = array("\x75\163\145\162\x6e\141\x6d\145" => "\x61\x64\x6d\x69\x6e", "\160\x61\x73\x73\167\157\162\x64" => "\x31\62\63\64\65\x36"); goto y85lN; Q4vYS: return true; goto bNHjQ; sRwIH: global $is_https; goto la0pt; jWRlm: $dbfile = IA_INSTALL_ROOT . "\x2f\x64\141\164\141\57\144\142\56\160\150\160"; goto VkuAe; orzcy: lPqwI: goto DKwsW; Rr2NP: $link->exec("\123\x45\124\x20\163\x71\x6c\137\x6d\157\144\145\x3d\x27\47"); goto jWRlm; VkuAe: if (file_exists(IA_INSTALL_ROOT . "\x2f\x69\156\144\x65\170\x2e\x70\x68\160") && is_dir(IA_INSTALL_ROOT . "\x2f\167\x65\x62") && file_exists(IA_INSTALL_ROOT . "\x2f\146\x72\141\155\x65\167\x6f\162\153\x2f\166\x65\162\163\x69\157\156\56\151\156\143\x2e\160\150\x70") && file_exists($dbfile)) { goto lPqwI; } goto IIT9e; E8V2l: if (!(empty($dat) || !is_array($dat))) { goto fY8j_; } goto NeGxT; OAVbj: KRjtB: goto ssiSi; uE3JO: fY8j_: goto CIeKd; bNHjQ: } goto a1lRK; dY_x9: vlvcq: goto DiP1e; L3Bzz: $db_name = trim($_POST["\156\x61\x6d\x65"]); goto Hl1ak; nLjE5: header("\154\157\x63\141\164\151\x6f\156\x3a\40\56\x2f\151\x6e\144\145\170\56\x70\x68\160"); goto LiHbu; SHWzG: touch(IA_INSTALL_ROOT . "\57\x64\141\164\x61\x2f\144\142\x2e\154\157\143\153"); goto RwCon; foD8w: we7_handle_chunk(); goto tOp4C; f0886: if (!($database_result !== true)) { goto yTc0P; } goto EhwBz; iqnTF: exit(we7_error(421, $handle_result)); goto krs3A; VcnL0: $ret["\x72\x6f\x6f\164"]["\x6e\x61\155\x65"] = "\346\x9c\254\xe5\234\xb0\xe7\233\xae\345\xbd\x95\xe5\x86\x99\345\205\xa5"; goto BH3v0; SCD0y: if (!($finished === true)) { goto rS6oE; } goto icGn9; tDUXp: $sitepath = substr($_SERVER["\120\110\120\137\123\x45\114\106"], 0, strrpos($_SERVER["\120\x48\120\x5f\123\105\114\106"], "\57")); goto ShS8w; i0lHe: if ($ret["\x72\157\x6f\x74"]["\x6f\153"]) { goto a8kMY; } goto VMdI0; WBRkg: L_Xox: goto aOtNC; CIrqT: if (!(file_exists(IA_INSTALL_ROOT . "\x2f\x64\x61\164\x61\57\x69\156\x73\x74\141\x6c\154\56\x6c\x6f\143\x6b") && !in_array($action, array("\157\x61\x75\164\x68", "\154\157\147\151\x6e")))) { goto lHdEA; } goto nLjE5; dZJDE: $server = trim($_POST["\x73\145\x72\x76\145\162"]); goto HHNfe; TigFp: $post = array("\141\143\143\145\163\163\x5f\x74\157\x6b\145\x6e" => $accesstoken, "\x63\x68\165\x6e\x6b" => $chunk_num); goto Sqeaw; TWzYn: $action = in_array($action, $actions) ? $action : ''; goto CIrqT; g87fq: $dbfile = IA_INSTALL_ROOT . "\57\144\x61\x74\141\57\x64\x62\56\x70\150\160"; goto ne55Y; SP9jT: kcdm5: goto kOysc; Cm1JF: if (!(is_array($data) && isset($data["\x65\162\x72\157\162"]))) { goto L_Xox; } goto jBgQP; giVLU: Rw0Z3: goto rl66b; yjYth: function we7_handle_chunk() { goto gbE8i; ztxGk: QPczL: goto ehzAa; m2iZv: $zip = new ZipArchive(); goto kzS8a; JiVL_: $zip->close(); goto Qvykr; DMGKT: goto xge7c; goto HuRxg; ehzAa: $i++; goto sw1Vz; hVsGA: $result = false; goto Xkm49; Qvykr: WCraV: goto Hmc7P; Xkm49: goto WCraV; goto ag0pP; ag0pP: wVDMN: goto VjTuj; aKTtF: CMIup: goto f1YhA; sw1Vz: goto XGpuJ; goto aKTtF; vjQv8: return $result; goto cLm0V; Jh61N: dURo1: goto vjQv8; yf9Gl: $result = true; goto lmbVo; f1YhA: if (!($result === false)) { goto dURo1; } goto KVVdZ; QHffv: xge7c: goto Uj1c3; gmwKe: @unlink("\56\57\143\x68\165\x6e\153\137" . $i); goto ztxGk; boImB: $i = 1; goto QHffv; gbE8i: $package_md5 = we7_getcookie("\160\x61\x63\x6b\x61\x67\145\137\155\x64\x35"); goto UWoHg; UWoHg: $tmpfile = "\x2e\x2f\x77\145\67\163\157\x75\x72\x63\145\56\172\151\x70"; goto bkmjL; FmFuZ: if (!($i <= $chunk_num)) { goto CMIup; } goto gmwKe; POt0D: $filename = "\x2e\57\143\x68\165\156\153\137" . $i; goto KV5sL; KV5sL: if (file_exists($filename)) { goto PqZZi; } goto QBEIn; HuRxg: w5djF: goto yf9Gl; oY01w: $i = 1; goto W7Lq7; MK8fv: PqZZi: goto V80aK; KVVdZ: return "\xe5\xae\x89\350\xa3\205\xe5\214\x85\344\270\215\346\255\xa3\xe7\xa1\256"; goto Jh61N; VjTuj: $zip->extractTo(IA_INSTALL_ROOT); goto JiVL_; kzS8a: $res = $zip->open($tmpfile); goto GMLdE; V80aK: file_put_contents($tmpfile, file_get_contents($filename), FILE_APPEND); goto zvEKp; Uj1c3: if (!($i <= $chunk_num)) { goto w5djF; } goto POt0D; CWSff: $i++; goto DMGKT; zvEKp: df7Pj: goto CWSff; W7Lq7: XGpuJ: goto FmFuZ; bkmjL: $chunk_num = we7_getcookie("\143\150\165\x6e\x6b\137\x74\157\x74\x61\154"); goto boImB; Ox5yp: @unlink("\56\x2f" . $tmpfile); goto oY01w; Hmc7P: HYmbm: goto Ox5yp; lmbVo: if (!(file_exists($tmpfile) && $package_md5 === md5_file($tmpfile))) { goto HYmbm; } goto m2iZv; GMLdE: if ($res === TRUE) { goto wVDMN; } goto hVsGA; QBEIn: goto df7Pj; goto MK8fv; cLm0V: } goto ThDrO; rESVc: if ($result) { goto eEoq5; } goto HzI3p; xP2UA: $chunk_num = max(1, intval($_POST["\143\150\x75\156\x6b"])); goto ZLb80; zfEbw: goto HZCX7; goto T6a6y; YiglY: $user_result = we7_update_user($username, $password); goto hZU_q; MgneE: $siteroot = ($is_https ? "\150\164\x74\x70\x73\x3a\x2f\x2f" : "\150\x74\x74\x70\x3a\57\x2f") . $_SERVER["\123\x45\122\126\x45\122\137\x4e\x41\115\x45"] . $sitepath; goto gNk7v; H2Qj2: $is_https = $_SERVER["\x53\105\x52\126\x45\122\137\120\117\122\124"] == 443 || isset($_SERVER["\x48\124\124\120\x53"]) && strtolower($_SERVER["\x48\x54\x54\x50\123"]) != "\157\146\x66" || strtolower($_SERVER["\110\124\x54\x50\x5f\130\137\x46\117\x52\127\101\x52\x44\x45\x44\x5f\x50\x52\117\124\x4f"]) == "\x68\164\164\x70\x73" || strtolower($_SERVER["\110\x54\124\120\137\130\x5f\103\114\111\x45\116\124\137\x53\103\x48\105\115\x45"]) == "\x68\x74\164\x70\x73" ? true : false; goto tDUXp; L9Tdy: exit(we7_error(430, $register_site_result)); goto YvXub; nGeHp: $ret["\165\x70\x6c\x6f\141\x64"]["\146\141\151\154\x65\144"] = true; goto GEHBd; GUTQo: define("\x41\120\x49\x5f\117\x41\125\x54\110\137\x52\x45\107\111\x53\124\x45\122\137\x53\x49\124\x45", API_HOST . "\57\163\151\164\145\x2f\x72\145\x67\x69\x73\x74\145\x72\57\x69\156\x64\x65\170"); goto WBwTf; TKkjW: define("\x41\x50\111\137\x4f\x41\125\x54\x48\137\101\103\103\x45\123\x53\x54\117\x4b\105\116", API_HOST . "\x2f\x6f\141\165\x74\150\57\x61\x63\x63\145\163\x73\x2d\x74\x6f\x6b\145\156\57\x63\157\144\x65"); goto I5wF_; LiHbu: exit; goto z0lXa; kFUQq: $data = we7_request_api(API_GET_PACKAGE_MD5_AND_CHUNKTOTAL, array("\x61\x63\143\x65\163\x73\x5f\x74\x6f\x6b\145\x6e" => $accesstoken)); goto NpIUb; uKJPb: function we7_upgrade() { goto cQ82j; Mw6eJ: if (empty($updatefiles)) { goto FpYqp; } goto pSjde; THnfq: return true; goto RWJ_J; X000U: gCevt: goto r6A6p; ibwUQ: rmdirs($updatedir, true); goto sWIbo; JywZM: define("\x49\x4e\137\123\131\123", true); goto GAMPw; Kd6cZ: f6_Yr: goto ekz6S; r6A6p: if (!(!empty($packet["\x66\151\154\x65\163"]) && is_array($packet["\x66\151\x6c\145\x73"]))) { goto j2wRi; } goto FtAj9; yS06q: load()->func("\x66\x69\154\x65"); goto Jk4mB; RVF1k: foreach ($packet["\x73\x63\150\145\155\x61\x73"] as $schema) { goto vbckm; v8vPL: LyDY5: goto E7Bxn; Ir21J: foreach ($sqls as $sql) { pdo_query($sql); mMznr: } goto jSqgQ; uxkTx: $local = db_table_schema(pdo(), $tablename); goto yf4fW; vbckm: $tablename = substr($schema["\x74\x61\142\x6c\145\156\x61\x6d\145"], 4); goto uxkTx; jSqgQ: uvIN1: goto v8vPL; yf4fW: $sqls = db_table_fix_sql($local, $schema); goto Ir21J; E7Bxn: } goto gRUnv; wtH5j: foreach ($packet["\x73\143\162\151\160\164\x73"] as $script) { goto bHyCk; jzlDE: $crelease = $script["\x72\x65\x6c\145\x61\x73\145"]; goto I9H_e; kQ8tr: file_put_contents($updatefile, $script["\x73\x63\162\x69\x70\164"]); goto mDdHw; gq8ta: jTmWm: goto SX7Bh; SX7Bh: $updatefile = $updatedir . $fname; goto kQ8tr; S9Qz3: W7NoF: goto j80By; XyfFL: if (!empty($script["\x73\143\x72\x69\x70\164"])) { goto jTmWm; } goto Y7S0P; bHyCk: if (!($script["\162\145\x6c\x65\141\163\x65"] <= $crelease)) { goto W7NoF; } goto BuoIM; I9H_e: $script["\x73\143\162\x69\x70\164"] = @base64_decode($script["\163\143\162\x69\x70\x74"]); goto XyfFL; BuoIM: goto JlDhf; goto S9Qz3; mDdHw: $updatefiles[] = $updatefile; goto cFjbm; cFjbm: JlDhf: goto ZZ4rp; Y7S0P: $script["\163\143\162\151\160\x74"] = <<<DAT
<?php
load()->model('setting');
setting_upgrade_version('{$packet["\146\141\155\151\x6c\171"]}', '{$script["\x76\145\162\x73\x69\x6f\156"]}', '{$script["\x72\145\x6c\145\x61\163\x65"]}');
return true;
DAT;
goto gq8ta; j80By: $fname = "\165\160\144\141\164\x65\x28{$crelease}\55{$script["\162\145\154\145\x61\163\x65"]}\51\x2e\160\x68\x70"; goto jzlDE; ZZ4rp: } goto fp_3W; i1TAS: FpYqp: goto JHyB6; GAMPw: require IA_INSTALL_ROOT . "\x2f\x66\162\141\155\x65\x77\x6f\x72\153\57\x62\x6f\157\164\x73\x74\162\x61\160\56\x69\156\x63\x2e\160\150\160"; goto xL1qO; AojQi: j2wRi: goto VFuAA; acxxF: mRRVR: goto i1TAS; aaGze: $updatefiles = array(); goto RwJqy; EThln: load()->func("\x64\x62"); goto yS06q; J1rM2: return true; goto X000U; JHyB6: IMtaI: goto THnfq; gRUnv: uLiJG: goto Kd6cZ; pSjde: foreach ($updatefiles as $file) { goto NmiSF; lhru2: cache_build_setting(); goto zpEzr; qZJCS: $evalret = (include $entry); goto dmmlW; CZMGD: goto qTl2B; goto DPBra; zpEzr: @unlink($entry); goto b646i; DPBra: i7UN6: goto qZJCS; dmmlW: if (empty($evalret)) { goto nhtrw; } goto UUU5R; b646i: nhtrw: goto Nj_Va; NmiSF: if (!(!is_file($file) || !preg_match("\57\136\x75\160\x64\141\x74\145\134\x28\x5c\x64\173\x31\62\175\x5c\55\x5c\x64\x7b\61\62\x7d\134\x29\x5c\56\x70\x68\x70\44\57", $file))) { goto i7UN6; } goto CZMGD; Nj_Va: qTl2B: goto JuM1t; UUU5R: cache_build_users_struct(); goto lhru2; JuM1t: } goto acxxF; RwJqy: $updatedir = IA_INSTALL_ROOT . "\x2f\144\141\164\141\57\x75\x70\144\141\164\145\57"; goto ibwUQ; sWIbo: mkdirs($updatedir); goto emw2y; yAc0J: b5H7w: goto AojQi; VFuAA: if (!(!empty($packet["\x73\x63\150\145\155\x61\x73"]) && is_array($packet["\163\x63\x68\145\x6d\141\163"]))) { goto f6_Yr; } goto RVF1k; FtAj9: foreach ($packet["\146\151\x6c\x65\x73"] as $file) { cloud_download($file, "\146\x69\x6c\x65\x73"); IfSiS: } goto yAc0J; cQ82j: global $_W; goto JywZM; fp_3W: Twh9T: goto Mw6eJ; Jk4mB: $packet = cloud_build(); goto MpeJr; ekz6S: if (!(!empty($packet["\x73\143\x72\x69\x70\164\163"]) && is_array($packet["\163\x63\162\151\x70\164\x73"]))) { goto IMtaI; } goto aaGze; MpeJr: if (!empty($packet)) { goto gCevt; } goto J1rM2; uHt4f: $crelease = IMS_RELEASE_DATE; goto wtH5j; xL1qO: require IA_INSTALL_ROOT . "\x2f\167\145\x62\x2f\x63\x6f\x6d\155\x6f\156\57\142\x6f\x6f\x74\x73\x74\162\141\x70\56\163\171\x73\56\151\x6e\143\x2e\160\150\160"; goto t4x41; emw2y: $cversion = IMS_VERSION; goto uHt4f; t4x41: load()->model("\143\x6c\157\165\144"); goto EThln; RWJ_J: } goto CW3f7; P_j1x: qfBM2: goto FAxgj; ZjpoQ: if ($data["\x65\162\x72\x6f\x72"] == 401) { goto Sal7_; } goto fRL5K; p0hud: xzTax: goto uxWKu; eGeyt: if (!($action == "\151\156\x73\164\141\x6c\x6c")) { goto VaO75; } goto dsrMX; vgVxH: header("\x63\157\156\x74\145\x6e\164\x2d\x74\x79\160\x65\x3a\40\x74\x65\x78\164\57\x68\x74\x6d\154\73\x20\x63\150\141\x72\x73\x65\x74\75\x75\x74\x66\55\70"); goto iLMWR; f1i_d: $db_prefix = !empty($db_prefix) ? $db_prefix : "\x69\x6d\x73\x5f"; goto H2R0Q; ne55Y: if (file_exists(IA_INSTALL_ROOT . "\x2f\151\156\144\145\x78\x2e\x70\150\x70") && is_dir(IA_INSTALL_ROOT . "\x2f\x77\x65\x62") && file_exists($verfile) && file_exists($dbfile)) { goto BlBfY; } goto foD8w; VMATu: sY1wr: goto OxvGs; yvxxG: $actions = array("\157\x61\165\x74\x68", "\x65\156\x76\x69\x72\x6f\x6e\155\x65\x6e\164", "\x69\x6e\163\164\x61\x6c\154", "\x63\150\165\156\153\164\x6f\164\x61\154", "\144\x6f\167\x6e\154\157\141\144", "\x69\x6e\163\164\141\154\x6c", "\162\145\x67\x69\163\x74\x65\x72\x5f\x63\141\154\154\x62\x61\x63\x6b", "\x6c\x6f\147\x69\x6e"); goto H4Hid; UvOvG: $site = array("\153\145\171" => $auth["\153\x65\171"], "\164\157\153\x65\156" => $auth["\164\x6f\153\145\x6e"]); goto wWSR9; q_3NL: FNz2H: goto O8cQG; wpSYg: qXqsn: goto wmGXF; DX880: eKeOs: goto Xo6PV; jBgQP: exit(we7_error(400, "\xe8\x8e\xb7\345\217\x96\141\x63\x63\x65\x73\163\164\x6f\153\145\x6e\xe5\xa4\261\xe8\xb4\245\357\xbc\x8c\xe8\xaf\267\351\x87\x8d\346\x96\260\xe7\231\xbb\xe5\275\225\56")); goto WBRkg; OGlKu: set_time_limit(0); goto BcYMz; FRQ1M: function we7_setcookie($key, $value) { goto EEAAX; txvIq: return setcookie(COOKIE_PRE . $key, $value, 0, '', '', $secure, true); goto CYx4_; EEAAX: $secure = $_SERVER["\x53\105\122\126\105\x52\x5f\x50\117\122\124"] == 443 ? 1 : 0; goto WUPN_; WUPN_: if (!is_array($value)) { goto adg9z; } goto OEF_I; OEF_I: $value = json_encode($value); goto Xd43o; Xd43o: adg9z: goto txvIq; CYx4_: } goto AU8UK; fyQ5b: $i++; goto hML1Y; WpVux: if (!(version_compare(PHP_VERSION, "\x35\56\x33\56\60") == -1)) { goto sY1wr; } goto hiybN; WH6c7: g7OoO: goto fyQ5b; aUoVA: exit(we7_error(432, "\xe8\257\267\345\205\210\350\x8e\xb7\xe5\217\226\xe5\x88\206\345\x8d\267\346\x80\xbb\351\207\217\56")); goto y_o7N; KY_lg: if (!empty($chunk_total)) { goto howlN; } goto aUoVA; ckfxI: $database_result = we7_db(); goto GdYJI; sJ4A1: U5WM4: goto r0NE6; gIUjp: $ret["\x61\x73\160\x5f\x74\141\147\163"]["\156\x61\x6d\145"] = "\x61\x73\160\137\164\141\x67\x73"; goto NuQ68; dPBjd: exit(we7_error(0, "\163\x75\x63\143\145\x73\x73")); goto p_2Zf; kQyRx: if (!(!empty($ret["\163\x65\x73\x73\x69\x6f\156"]["\x6f\x6b"]) && strtolower($ret["\x73\x65\x73\163\x69\157\156"]["\x6f\x6b"]) == "\157\156")) { goto eKeOs; } goto QQSdb; Jyiax: if (!($action == "\144\157\x77\x6e\x6c\x6f\x61\x64")) { goto I3tNM; } goto xP2UA; mmgnw: if (!(is_array($data) && isset($data["\145\x72\162\x6f\x72"]))) { goto DDBWL; } goto CVfXj; BKvtE: goto kcdm5; goto tlZPu; qmfTE: $data = we7_request_api(API_OAUTH_ACCESSTOKEN, array("\143\x6f\144\145" => $code)); goto Cm1JF; vnyKc: exit(we7_error(0, $chunk_num)); goto wpSYg; FMT5c: nExfM: goto dPBjd; umB_p: exit(we7_error(433, "\141\143\x63\145\x73\163\x74\157\153\x65\x6e\x20\x65\170\160\151\162\x65\144\x2e")); goto SP9jT; EhwBz: exit(we7_error(419, $database_result)); goto jXM4H; Co31E: if (file_exists(IA_INSTALL_ROOT . "\x2f\x64\141\164\x61\x2f\x69\156\x73\164\x61\x6c\154\x2e\x6c\157\143\x6b")) { goto RKtWE; } goto p1kjx; BH3v0: $ret["\x72\157\157\164"]["\x72\x65\163\165\154\164"] = "\xe6\x9c\xac\xe5\x9c\260\347\x9b\256\xe5\275\x95\346\x97\xa0\xe6\263\x95\xe5\x86\231\xe5\x85\245"; goto RLjH6; p1kjx: $register_site_result = we7_register_site(); goto RrBkJ; Sdj2b: cOIxG: goto V0TrI; L6Gbz: qrg8p: goto WH6c7; krs3A: t9BIH: goto lAama; u9Hfy: $ret["\144\x61\x74\141"]["\156\141\155\145"] = "\144\141\x74\141\xe7\x9b\xae\345\275\225\xe5\x86\231\xe5\205\xa5"; goto bayye; xJu0A: $i = 1; goto jvDC2; erc9W: $ret["\x76\145\x72\163\151\157\156"]["\162\x65\163\x75\154\x74"] = PHP_VERSION; goto VMATu; rl66b: $verfile = IA_INSTALL_ROOT . "\57\146\x72\x61\155\x65\x77\x6f\162\x6b\57\x76\x65\x72\x73\151\157\156\56\x69\x6e\143\x2e\160\150\x70"; goto g87fq; etfmK: define("\101\x50\111\x5f\x48\x4f\123\124", "\x68\164\x74\160\x3a\x2f\x2f\141\x70\151\x2e\167\67\x2e\143\x63"); goto fMY6i; CW3f7: function we7_update_sitename($sitename) { goto BxXkc; wHKGw: jF1b_: goto Yp6e2; Fj_A4: goto RMgdO; goto wHKGw; XLtkg: $site_info = setting_load("\x73\x69\x74\x65"); goto U5ovX; UHjh7: XC0ot: goto cn0NJ; ZfGD6: RMgdO: goto Q3SrA; cn0NJ: $data = we7_request_api(API_UPDATE_SITENAME, array("\141\x63\x63\145\x73\163\x5f\164\157\x6b\145\156" => $accesstoken, "\163\x69\164\x65\x5f\156\x61\x6d\x65" => $sitename, "\163\x69\x74\x65\137\153\x65\x79" => $site_info["\x73\x69\x74\x65"]["\x6b\145\x79"])); goto uTIMW; Yp6e2: return $data["\145\162\x72\x6f\162"]; goto ZfGD6; uTIMW: if (is_array($data) && isset($data["\x65\162\x72\157\162"])) { goto jF1b_; } goto aOsAT; BxXkc: global $accesstoken, $_W; goto XLtkg; UfJT2: return "\347\253\x99\347\x82\271\xe4\xbf\241\346\x81\xaf\344\270\x8d\xe5\255\230\xe5\234\250\xef\274\214\350\xaf\xb7\xe9\x87\215\346\x96\xb0\346\263\xa8\345\206\x8c\xe7\253\x99\xe7\202\xb9\x2e"; goto UHjh7; U5ovX: if (!(empty($site_info["\x73\x69\x74\x65"]) || empty($site_info["\x73\151\164\x65"]["\x6b\145\x79"]))) { goto XC0ot; } goto UfJT2; aOsAT: return true; goto Fj_A4; Q3SrA: } goto Y6JFM; a6Ldf: $post = file_get_contents("\160\150\160\x3a\x2f\x2f\x69\156\x70\x75\x74"); goto acQH9; CS5oA: $server["\x75\160\154\x6f\141\x64"] = @ini_get("\146\151\x6c\x65\137\165\x70\x6c\x6f\x61\144\163") ? ini_get("\165\160\154\157\x61\x64\137\x6d\x61\x78\x5f\146\x69\x6c\x65\163\151\x7a\145") : "\165\156\x6b\x6e\157\x77"; goto q0Um4; jvDC2: KrlMK: goto Lqgc1; UBt1R: DDBWL: goto ny_BA; jXM4H: yTc0P: goto giVLU; rgrJ5: if ($ret["\x64\157\x6d"]["\157\x6b"]) { goto IHdP4; } goto r3htK; g0Cyi: if (!($sitename != $siteroot . "\xe7\232\204\347\253\231\xe7\202\xb9")) { goto bGCfF; } goto kdS1l; ahMVR: ZlnkB: goto SHWzG; YvXub: s6zsx: goto svIbX; wmGXF: I3tNM: goto eGeyt; AU8UK: function we7_getcookie($key) { goto enyBS; xMUGj: qZiIF: goto R1M0c; enyBS: if (!empty($key)) { goto qZiIF; } goto iUSHi; R1M0c: $key = COOKIE_PRE . $key; goto Sk7ng; Sk7ng: return $_COOKIE[$key]; goto oAWi9; iUSHi: return ''; goto xMUGj; oAWi9: }